# 🚀 v3.0.20 快速开始指南

**版本**: v3.0.20 稳定版
**时间**: 5分钟快速部署

---

## 📦 文件下载

- **插件文件**: `nextjs-sso-integration-v3.0.20.zip`
- **MD5**: `D74C2FF25F09438EA33097BDFE8F2CFB`
- **大小**: 17.5 KB

---

## ⚡ 3步骤快速部署

### 步骤1: 安装插件（1分钟）

```
WordPress后台 → 插件 → 上传插件
选择: nextjs-sso-integration-v3.0.20.zip
点击: 立即激活
```

### 步骤2: 配置WPCOM隐藏区块（3分钟）

```
1. WordPress后台 → 页面 → 编辑 /js 页面
2. 添加 WPCOM隐藏内容区块
3. 设置可见条件: 仅登录用户
4. 粘贴HTML + JavaScript代码（见下方）
5. 点击"更新"
```

**完整代码**（复制全部）:

```html
<div id="app-entry-card" style="padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3); text-align: center; margin: 40px auto; max-width: 600px;">
    <div style="font-size: 48px; margin-bottom: 15px;">🎨</div>
    <h2 style="color: white; margin-bottom: 10px; font-size: 28px;">智能设计分析工具</h2>
    <p style="color: rgba(255,255,255,0.9); margin-bottom: 25px; font-size: 16px;">欢迎回来！您的专属AI设计助手已准备就绪</p>
    <a href="#" id="app-entry-link" style="display: inline-block; padding: 15px 40px; background: white; color: #667eea; border-radius: 10px; text-decoration: none; font-weight: bold; font-size: 18px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); transition: all 0.3s;">🚀 立即开始分析</a>
    <p style="color: rgba(255,255,255,0.7); margin-top: 20px; font-size: 13px;">✓ 实时分析  ✓ 专家建议  ✓ 智能优化</p>
</div>

<script>
(async function() {
    try {
        const response = await fetch('https://www.ucppt.com/wp-json/nextjs-sso/v1/get-token', {credentials: 'include'});
        if (response.ok) {
            const data = await response.json();
            const appUrl = 'http://localhost:3000'; // 生产环境改为: https://www.ucppt.com/nextjs
            document.getElementById('app-entry-link').href = appUrl + '?sso_token=' + encodeURIComponent(data.token);
            console.log('✅ Token已生成，应用链接已更新');
        }
    } catch (error) {
        console.error('❌ Token获取异常:', error);
    }
})();
</script>
```

### 步骤3: 测试（1分钟）

```
1. 清除浏览器缓存（Ctrl+Shift+Delete）
2. 访问 ucppt.com/js
3. 登录WordPress
4. 点击"🚀 立即开始分析"
5. 应该直接进入应用 ✅
```

---

## ✅ 成功标志

- [x] 浏览器控制台显示：`✅ Token已生成，应用链接已更新`
- [x] 右键链接包含：`?sso_token=...`
- [x] 点击后直接进入应用（不显示登录界面）
- [x] 控制台无401/400错误

---

## 🔧 生产环境

**修改JavaScript代码第13行**:

```javascript
// 开发环境
const appUrl = 'http://localhost:3000';

// 改为生产环境
const appUrl = 'https://www.ucppt.com/nextjs';
```

---

## 📚 完整文档

- **部署指南**: `WORDPRESS_SSO_V3.0.20_DEPLOYMENT_GUIDE.md`
- **发布说明**: `WORDPRESS_SSO_V3.0.20_RELEASE_NOTES.md`
- **清理报告**: `V3.0.20_CLEANUP_SUMMARY.md`

---

## 🎯 核心特性

✅ 跨域Cookie问题完美解决
✅ WPCOM隐藏区块架构
✅ JavaScript Token自动注入
✅ 死循环问题彻底修复
✅ Chrome/Edge/Firefox全面测试

---

**版本**: v3.0.20
**状态**: ✅ 稳定版
**时间**: 5分钟部署
