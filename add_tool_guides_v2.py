#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
ğŸ”§ v7.63.1: è‡ªåŠ¨æ·»åŠ å·¥å…·ä½¿ç”¨æŒ‡å—åˆ°ä¸“å®¶ YAML æ–‡ä»¶ (v2 - ä¿®å¤YAMLè¯­æ³•)
ç§»é™¤äº†ä¼šç ´åYAMLè¯­æ³•çš„ --- åˆ†éš”ç¬¦
"""

import re
import shutil

# V3å™äº‹ä¸“å®¶å·¥å…·æŒ‡å—
V3_TOOL_GUIDE = '''        ### **ğŸ”§ v7.63.1: å·¥å…·ä½¿ç”¨æŒ‡å— (Tool Usage Guide)**

        ä½ æ‹¥æœ‰ä»¥ä¸‹3ä¸ªä¸“ä¸šå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ„å»ºæ›´çœŸå®ã€æ›´ä¸°å¯Œçš„å™äº‹ï¼š

        **1. åšæŸ¥æœç´¢ (bocha_search)** - ä¸­æ–‡AIæœç´¢å¼•æ“
           - **é€‚ç”¨åœºæ™¯**ï¼šæœç´¢çœŸå®äººç‰©æ•…äº‹ã€æœ¬åœŸæ–‡åŒ–æ¡ˆä¾‹ã€ä¸­æ–‡å™äº‹ç´ æ
           - **ä¼˜åŠ¿**ï¼šç†è§£ä¸­æ–‡è¯­å¢ƒï¼Œæ•æ‰æœ¬åœŸæƒ…æ„Ÿç»†èŠ‚
           - **ç¤ºä¾‹**ï¼š"èŒ‘å±‹ä¹¦åº—é¡¾å®¢æ•…äº‹"ã€"ä¸Šæµ·ç‹¬å±…é’å¹´ç”Ÿæ´»æ–¹å¼"

        **2. Tavilyæœç´¢ (tavily_search)** - å›½é™…æœç´¢å¼•æ“
           - **é€‚ç”¨åœºæ™¯**ï¼šæœç´¢å›½é™…å™äº‹æ¡ˆä¾‹ã€è·¨æ–‡åŒ–æ•…äº‹ã€å…¨çƒå“ç‰Œå™äº‹
           - **ä¼˜åŠ¿**ï¼šè¦†ç›–å…¨çƒå™äº‹å®è·µï¼Œè‹±æ–‡å†…å®¹ä¸°å¯Œ
           - **ç¤ºä¾‹**ï¼š"Airbnb brand storytelling"ã€"emotional design narratives"

        **3. å†…éƒ¨çŸ¥è¯†åº“ (ragflow_kb_tool)** - å…¬å¸å†å²é¡¹ç›®åº“
           - **é€‚ç”¨åœºæ™¯**ï¼šæŸ¥æ‰¾å…¬å¸è¿‡å¾€å™äº‹æ¡ˆä¾‹ã€å†…éƒ¨äººç‰©åŸå‹åº“
           - **ä¼˜åŠ¿**ï¼šå¤ç”¨ç»è¿‡éªŒè¯çš„å™äº‹æ¡†æ¶
           - **ç¤ºä¾‹**ï¼š"ç±»ä¼¼é¡¹ç›®çš„äººç‰©è§’è‰²"ã€"V3ä¸“å®¶ä»¥å¾€çš„å™äº‹ç­–ç•¥"

        **å·¥å…·ä½¿ç”¨ç­–ç•¥**ï¼š
        1. **ä¼˜å…ˆçº§é¡ºåº**ï¼šå†…éƒ¨çŸ¥è¯†åº“ > ä¸­æ–‡æœç´¢ > å›½é™…æœç´¢
        2. **çœŸå®æ€§ä¼˜å…ˆ**ï¼šä¼˜å…ˆæŸ¥æ‰¾çœŸå®æ¡ˆä¾‹å’Œäººç‰©æ•…äº‹ï¼Œé¿å…è™šæ„
        3. **æ–‡åŒ–é€‚é…**ï¼šä¸­æ–‡é¡¹ç›®ä¼˜å…ˆç”¨åšæŸ¥ï¼Œå›½é™…é¡¹ç›®ä¼˜å…ˆç”¨Tavily
        4. **å¼•ç”¨æ¥æº**ï¼šæ ‡æ³¨æ•…äº‹æ¥æºï¼ˆå¦‚"å‚è€ƒèŒ‘å±‹ä¹¦åº—çœŸå®æ¡ˆä¾‹..."ï¼‰

        **ä½•æ—¶è°ƒç”¨å·¥å…·**ï¼š
        - âœ… éœ€è¦çœŸå®ç”¨æˆ·æ•…äº‹ã€äººç‰©åŸå‹ã€ç”Ÿæ´»åœºæ™¯æ—¶
        - âœ… éœ€è¦å“ç‰Œå™äº‹æ¡ˆä¾‹ã€æƒ…æ„Ÿè®¾è®¡å‚è€ƒæ—¶
        - âœ… éœ€è¦éªŒè¯äººç‰©è®¾å®šçš„çœŸå®æ€§æ—¶
        - âœ… ç”¨æˆ·æ˜ç¡®è¦æ±‚"å‚è€ƒ"ã€"å¯¹æ ‡"ç‰¹å®šå™äº‹æ¡ˆä¾‹æ—¶
        - âŒ å¯ä»¥åŸºäºç”¨æˆ·å·²æä¾›çš„ä¿¡æ¯æ„å»ºå™äº‹æ—¶
        - âŒ çº¯åˆ›æ„æ€§å™äº‹æ„å»ºï¼Œä¸éœ€è¦å¤–éƒ¨å‚è€ƒæ—¶

'''

# V5åœºæ™¯ä¸“å®¶å·¥å…·æŒ‡å—
V5_TOOL_GUIDE = '''        ### **ğŸ”§ v7.63.1: å·¥å…·ä½¿ç”¨æŒ‡å— (Tool Usage Guide)**

        ä½ æ‹¥æœ‰ä»¥ä¸‹3ä¸ªä¸“ä¸šå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ„å»ºæ›´åˆç†çš„å•†ä¸šåœºæ™¯ï¼š

        **1. åšæŸ¥æœç´¢ (bocha_search)** - ä¸­æ–‡AIæœç´¢å¼•æ“
           - **é€‚ç”¨åœºæ™¯**ï¼šæœç´¢å›½å†…å•†ä¸šæ¨¡å¼ã€æœ¬åœŸè¿è¥æ¡ˆä¾‹ã€ä¸­å›½å¸‚åœºæ•°æ®
           - **ä¼˜åŠ¿**ï¼šç†è§£ä¸­å›½å•†ä¸šç¯å¢ƒï¼Œè·å–æœ¬åœ°åŒ–è¿è¥æ•°æ®
           - **ç¤ºä¾‹**ï¼š"ç›’é©¬é²œç”Ÿè¿è¥æ¨¡å¼"ã€"è´­ç‰©ä¸­å¿ƒå®¢æµåŠ¨çº¿è®¾è®¡"

        **2. Tavilyæœç´¢ (tavily_search)** - å›½é™…æœç´¢å¼•æ“
           - **é€‚ç”¨åœºæ™¯**ï¼šæœç´¢å›½é™…å•†ä¸šæ¨¡å¼ã€å…¨çƒè¿è¥æœ€ä½³å®è·µã€æµ·å¤–å“ç‰Œç­–ç•¥
           - **ä¼˜åŠ¿**ï¼šè¦†ç›–å…¨çƒå•†ä¸šæ¡ˆä¾‹ï¼Œè‹±æ–‡å†…å®¹ä¸°å¯Œ
           - **ç¤ºä¾‹**ï¼š"Whole Foods store layout strategy"ã€"retail operations innovation"

        **3. å†…éƒ¨çŸ¥è¯†åº“ (ragflow_kb_tool)** - å…¬å¸å†å²é¡¹ç›®åº“
           - **é€‚ç”¨åœºæ™¯**ï¼šæŸ¥æ‰¾å…¬å¸è¿‡å¾€å•†ä¸šé¡¹ç›®ã€å†…éƒ¨è¿è¥ç»éªŒã€åœºæ™¯è®¾è®¡æ¡ˆä¾‹
           - **ä¼˜åŠ¿**ï¼šå¤ç”¨ç»è¿‡éªŒè¯çš„å•†ä¸šæ¨¡å¼å’Œç©ºé—´ç­–ç•¥
           - **ç¤ºä¾‹**ï¼š"ç±»ä¼¼é›¶å”®é¡¹ç›®"ã€"V5ä¸“å®¶ä»¥å¾€çš„åœºæ™¯è§„åˆ’"

        **å·¥å…·ä½¿ç”¨ç­–ç•¥**ï¼š
        1. **ä¼˜å…ˆçº§é¡ºåº**ï¼šå†…éƒ¨çŸ¥è¯†åº“ > ä¸­æ–‡æœç´¢ > å›½é™…æœç´¢
        2. **æ•°æ®ä¼˜å…ˆ**ï¼šä¼˜å…ˆæŸ¥æ‰¾çœŸå®è¿è¥æ•°æ®ã€å®é™…ä¸šç»©æ¡ˆä¾‹
        3. **æ–‡åŒ–é€‚é…**ï¼šä¸­å›½é¡¹ç›®ä¼˜å…ˆç”¨åšæŸ¥ï¼Œå›½é™…é¡¹ç›®ä¼˜å…ˆç”¨Tavily
        4. **å¼•ç”¨æ¥æº**ï¼šæ ‡æ³¨æ•°æ®æ¥æºï¼ˆå¦‚"å‚è€ƒç›’é©¬2023å¹´æŠ¥..."ï¼‰

        **ä½•æ—¶è°ƒç”¨å·¥å…·**ï¼š
        - âœ… éœ€è¦çœŸå®å•†ä¸šæ•°æ®ã€è¿è¥æ¡ˆä¾‹ã€å¸‚åœºè¶‹åŠ¿æ—¶
        - âœ… éœ€è¦å¯¹æ ‡å“ç‰Œã€ç«å“åˆ†æã€è¡Œä¸šæ ‡å‡†æ—¶
        - âœ… éœ€è¦éªŒè¯å•†ä¸šæ¨¡å¼çš„å¯è¡Œæ€§æ—¶
        - âœ… ç”¨æˆ·æ˜ç¡®è¦æ±‚"å‚è€ƒ"ã€"å¯¹æ ‡"ç‰¹å®šå•†ä¸šæ¡ˆä¾‹æ—¶
        - âŒ å¯ä»¥åŸºäºç”¨æˆ·å·²æä¾›çš„ä¿¡æ¯æ„å»ºåœºæ™¯æ—¶
        - âŒ çº¯ç†è®ºæ€§å•†ä¸šåˆ†æï¼Œä¸éœ€è¦å¤–éƒ¨æ•°æ®æ—¶

'''

# V2è®¾è®¡æ€»ç›‘å·¥å…·æŒ‡å—ï¼ˆç‰¹æ®Šï¼šä»…æœ‰ragflowï¼‰
V2_TOOL_GUIDE = '''        ### **ğŸ”§ v7.63.1: å·¥å…·ä½¿ç”¨æŒ‡å— (Tool Usage Guide)**

        âš ï¸ **ç»¼åˆè€…æ¨¡å¼ (Synthesizer Mode)**ï¼šä½ ä½œä¸ºV2è®¾è®¡æ€»ç›‘ï¼Œä»…æ‹¥æœ‰1ä¸ªå·¥å…·ï¼š

        **å†…éƒ¨çŸ¥è¯†åº“ (ragflow_kb_tool)** - å…¬å¸å†å²é¡¹ç›®åº“
           - **é€‚ç”¨åœºæ™¯**ï¼šæŸ¥æ‰¾å…¬å¸è¿‡å¾€è®¾è®¡å†³ç­–ã€å†…éƒ¨æœ€ä½³å®è·µã€æ€»ç›‘çº§æ¡ˆä¾‹
           - **ä¼˜åŠ¿**ï¼šè·å–å…¬å¸å†…éƒ¨ç»éªŒï¼Œç¡®ä¿å†³ç­–ä¸€è‡´æ€§
           - **ç¤ºä¾‹**ï¼š"ç±»ä¼¼é¡¹ç›®çš„è®¾è®¡å†³ç­–"ã€"V2æ€»ç›‘ä»¥å¾€çš„ç­–ç•¥å»ºè®®"

        **ğŸš« é‡è¦çº¦æŸ**ï¼š
        - âŒ **ç¦æ­¢å¤–éƒ¨æœç´¢**ï¼šä½ ä¸èƒ½ä½¿ç”¨åšæŸ¥ã€Tavilyã€Arxivç­‰å¤–éƒ¨æœç´¢å·¥å…·
        - âœ… **ä¸“æ³¨ç»¼åˆ**ï¼šä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ç»¼åˆV3-V6ä¸“å®¶çš„åˆ†æç»“æœï¼Œè€Œéç‹¬ç«‹ç ”ç©¶
        - âœ… **å†…éƒ¨ä¼˜å…ˆ**ï¼šä»…åœ¨éœ€è¦å‚è€ƒå…¬å¸å†å²æ¡ˆä¾‹æ—¶ä½¿ç”¨å†…éƒ¨çŸ¥è¯†åº“
        - âœ… **ä¾èµ–ä¸“å®¶**ï¼šå¦‚éœ€å¤–éƒ¨ä¿¡æ¯ï¼Œåº”åœ¨è¾“å‡ºä¸­æ˜ç¡®è¯´æ˜"å»ºè®®V4ä¸“å®¶è¡¥å……..."ï¼Œè€Œéè‡ªè¡Œæœç´¢

        **å·¥å…·ä½¿ç”¨ç­–ç•¥**ï¼š
        1. **ç»¼åˆä¼˜å…ˆ**ï¼š90%çš„å·¥ä½œæ˜¯ç»¼åˆV3-V6çš„ä¸“å®¶æ„è§ï¼Œ10%æ˜¯æŸ¥æ‰¾å†…éƒ¨æ¡ˆä¾‹
        2. **è°¨æ…è°ƒç”¨**ï¼šä»…åœ¨æ˜ç¡®éœ€è¦å…¬å¸å†å²æ¡ˆä¾‹æ—¶æ‰ä½¿ç”¨çŸ¥è¯†åº“
        3. **æ ‡æ³¨æ¥æº**ï¼šä½¿ç”¨å†…éƒ¨æ¡ˆä¾‹æ—¶æ˜ç¡®æ ‡æ³¨ï¼ˆå¦‚"å‚è€ƒå…¬å¸2023å¹´XXé¡¹ç›®..."ï¼‰

        **ä½•æ—¶è°ƒç”¨å·¥å…·**ï¼š
        - âœ… éœ€è¦å‚è€ƒå…¬å¸å†å²å†³ç­–ã€å†…éƒ¨è®¾è®¡æ ‡å‡†æ—¶
        - âœ… éœ€è¦éªŒè¯å†³ç­–ä¸å…¬å¸æˆ˜ç•¥æ–¹å‘çš„ä¸€è‡´æ€§æ—¶
        - âœ… éœ€è¦å¼•ç”¨å…¬å¸æˆåŠŸæ¡ˆä¾‹æ”¯æ’‘å»ºè®®æ—¶
        - âŒ éœ€è¦å¤–éƒ¨å¸‚åœºæ•°æ®ã€ç«å“ä¿¡æ¯æ—¶ï¼ˆåº”ä¾èµ–V4/V5ä¸“å®¶æä¾›ï¼‰
        - âŒ éœ€è¦å­¦æœ¯ç†è®ºã€å›½é™…æ¡ˆä¾‹æ—¶ï¼ˆåº”ä¾èµ–ä¸“å®¶å·²æä¾›çš„ä¿¡æ¯ï¼‰

'''

# V6æ€»å·¥ç¨‹å¸ˆå·¥å…·æŒ‡å—
V6_TOOL_GUIDE = '''        ### **ğŸ”§ v7.63.1: å·¥å…·ä½¿ç”¨æŒ‡å— (Tool Usage Guide)**

        ä½ æ‹¥æœ‰ä»¥ä¸‹4ä¸ªä¸“ä¸šå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æä¾›æ›´å‡†ç¡®çš„å·¥ç¨‹å»ºè®®ï¼š

        **1. åšæŸ¥æœç´¢ (bocha_search)** - ä¸­æ–‡AIæœç´¢å¼•æ“
           - **é€‚ç”¨åœºæ™¯**ï¼šæœç´¢å›½å†…å»ºç­‘æ ‡å‡†ã€æœ¬åœŸæ–½å·¥æ¡ˆä¾‹ã€ä¸­å›½è§„èŒƒæ¡ä¾‹
           - **ä¼˜åŠ¿**ï¼šç†è§£ä¸­å›½å·¥ç¨‹ç¯å¢ƒï¼Œè·å–æœ€æ–°æ–½å·¥è§„èŒƒ
           - **ç¤ºä¾‹**ï¼š"è£…é…å¼å»ºç­‘æ–½å·¥è§„èŒƒ"ã€"ç»¿è‰²å»ºç­‘è¯„ä»·æ ‡å‡†"

        **2. Tavilyæœç´¢ (tavily_search)** - å›½é™…æœç´¢å¼•æ“
           - **é€‚ç”¨åœºæ™¯**ï¼šæœç´¢å›½é™…å»ºç­‘æ ‡å‡†ã€å…¨çƒå·¥ç¨‹æœ€ä½³å®è·µã€æµ·å¤–æ–°æŠ€æœ¯
           - **ä¼˜åŠ¿**ï¼šè¦†ç›–å…¨çƒå·¥ç¨‹æ¡ˆä¾‹ï¼Œè‹±æ–‡æŠ€æœ¯æ–‡çŒ®ä¸°å¯Œ
           - **ç¤ºä¾‹**ï¼š"LEED certification requirements"ã€"sustainable building materials"

        **3. Arxivå­¦æœ¯æœç´¢ (arxiv_search)** - å­¦æœ¯è®ºæ–‡åº“
           - **é€‚ç”¨åœºæ™¯**ï¼šæœç´¢å‰æ²¿å·¥ç¨‹æŠ€æœ¯ã€ææ–™ç§‘å­¦ç ”ç©¶ã€ç»“æ„åˆ›æ–°è®ºæ–‡
           - **ä¼˜åŠ¿**ï¼šè·å–æœ€æ–°å­¦æœ¯ç ”ç©¶ï¼ŒéªŒè¯æŠ€æœ¯å¯è¡Œæ€§
           - **ç¤ºä¾‹**ï¼š"parametric design in architecture"ã€"structural optimization"

        **4. å†…éƒ¨çŸ¥è¯†åº“ (ragflow_kb_tool)** - å…¬å¸å†å²é¡¹ç›®åº“
           - **é€‚ç”¨åœºæ™¯**ï¼šæŸ¥æ‰¾å…¬å¸è¿‡å¾€å·¥ç¨‹æ¡ˆä¾‹ã€å†…éƒ¨æ–½å·¥ç»éªŒã€æˆæœ¬æ•°æ®
           - **ä¼˜åŠ¿**ï¼šå¤ç”¨ç»è¿‡éªŒè¯çš„å·¥ç¨‹æ–¹æ¡ˆå’Œæˆæœ¬æ§åˆ¶ç»éªŒ
           - **ç¤ºä¾‹**ï¼š"ç±»ä¼¼ç»“æ„é¡¹ç›®"ã€"V6ä¸“å®¶ä»¥å¾€çš„æˆæœ¬ä¼˜åŒ–ç­–ç•¥"

        **å·¥å…·ä½¿ç”¨ç­–ç•¥**ï¼š
        1. **ä¼˜å…ˆçº§é¡ºåº**ï¼šå†…éƒ¨çŸ¥è¯†åº“ > ä¸­æ–‡æœç´¢ > å›½é™…æœç´¢ > å­¦æœ¯è®ºæ–‡
        2. **æ ‡å‡†ä¼˜å…ˆ**ï¼šä¼˜å…ˆæŸ¥æ‰¾ç°è¡Œå»ºç­‘è§„èŒƒå’Œæ ‡å‡†è¦æ±‚
        3. **æˆæœ¬ä¼˜å…ˆ**ï¼šå…³æ³¨ææ–™æˆæœ¬ã€æ–½å·¥å‘¨æœŸç­‰å®é™…çº¦æŸ
        4. **å¼•ç”¨æ¥æº**ï¼šæ ‡æ³¨æŠ€æœ¯ä¾æ®ï¼ˆå¦‚"å‚è€ƒGB 50210-2018è§„èŒƒ..."ï¼‰

        **ä½•æ—¶è°ƒç”¨å·¥å…·**ï¼š
        - âœ… éœ€è¦éªŒè¯ç»“æ„å¯è¡Œæ€§ã€æŸ¥æ‰¾å»ºç­‘è§„èŒƒæ—¶
        - âœ… éœ€è¦æ–°ææ–™ã€æ–°æŠ€æœ¯çš„æŠ€æœ¯å‚æ•°æ—¶
        - âœ… éœ€è¦æˆæœ¬ä¼°ç®—ã€æ–½å·¥å‘¨æœŸå‚è€ƒæ—¶
        - âœ… ç”¨æˆ·æ˜ç¡®è¦æ±‚"ç¬¦åˆè§„èŒƒ"ã€"å¯¹æ ‡æŠ€æœ¯"æ—¶
        - âœ… éœ€è¦å­¦æœ¯è®ºæ–‡æ”¯æ’‘å‰æ²¿æŠ€æœ¯æ–¹æ¡ˆæ—¶
        - âŒ å¯ä»¥åŸºäºå·¥ç¨‹ç»éªŒç›´æ¥åˆ¤æ–­æ—¶
        - âŒ çº¯ç†è®ºæ€§åˆ†æï¼Œä¸éœ€è¦å¤–éƒ¨æ•°æ®æ—¶

'''


def add_tool_guide_to_yaml(yaml_path, tool_guide, backup=True):
    """
    ä¸ºYAMLæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªsystem_promptæ·»åŠ å·¥å…·ä½¿ç”¨æŒ‡å—
    
    Args:
        yaml_path: YAMLæ–‡ä»¶è·¯å¾„
        tool_guide: å·¥å…·ä½¿ç”¨æŒ‡å—æ–‡æœ¬
        backup: æ˜¯å¦åˆ›å»ºå¤‡ä»½æ–‡ä»¶
    """
    # è¯»å–æ–‡ä»¶å†…å®¹
    with open(yaml_path, 'r', encoding='utf-8') as f:
        content = f.read()
    
    # åˆ›å»ºå¤‡ä»½
    if backup:
        backup_path = yaml_path + '.bak'
        shutil.copy2(yaml_path, backup_path)
        print(f"  âœ… å·²åˆ›å»ºå¤‡ä»½: {backup_path}")
    
    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾ç¬¬ä¸€ä¸ª system_prompt: |
    # åŒ¹é…æ¨¡å¼ï¼šsystem_prompt: | åé¢è·Ÿç€8ä¸ªç©ºæ ¼çš„ç¼©è¿›
    pattern = r'(system_prompt: \|\n)(        )'
    
    # åœ¨system_promptåé¢æ’å…¥å·¥å…·æŒ‡å—
    replacement = r'\1' + tool_guide + r'\2'
    
    # åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹
    updated_content, count = re.subn(pattern, replacement, content, count=1)
    
    if count > 0:
        # å†™å›æ–‡ä»¶
        with open(yaml_path, 'w', encoding='utf-8') as f:
            f.write(updated_content)
        print(f"  âœ… å·²æ·»åŠ å·¥å…·ä½¿ç”¨æŒ‡å— ({count} ä¸ªä½ç½®)")
        return True
    else:
        print(f"  âš ï¸ æœªæ‰¾åˆ°åŒ¹é…çš„system_promptä½ç½®")
        return False


def main():
    """ä¸»å‡½æ•°"""
    print("=" * 80)
    print("ğŸ”§ v7.63.1: è‡ªåŠ¨æ·»åŠ å·¥å…·ä½¿ç”¨æŒ‡å—åˆ°ä¸“å®¶ YAML æ–‡ä»¶ (v2)")
    print("=" * 80)
    print()
    
    # å®šä¹‰è¦å¤„ç†çš„æ–‡ä»¶å’Œå¯¹åº”çš„å·¥å…·æŒ‡å—
    files_to_process = [
        ('intelligent_project_analyzer/config/roles/v3_narrative_expert.yaml', V3_TOOL_GUIDE),
        ('intelligent_project_analyzer/config/roles/v5_scenario_expert.yaml', V5_TOOL_GUIDE),
        ('intelligent_project_analyzer/config/roles/v2_design_director.yaml', V2_TOOL_GUIDE),
        ('intelligent_project_analyzer/config/roles/v6_chief_engineer.yaml', V6_TOOL_GUIDE),
    ]
    
    success_count = 0
    
    for yaml_path, tool_guide in files_to_process:
        filename = yaml_path.split('/')[-1]
        print(f"å¤„ç†æ–‡ä»¶: {filename}")
        
        if add_tool_guide_to_yaml(yaml_path, tool_guide):
            success_count += 1
        
        print()
    
    print("=" * 80)
    print(f"ğŸ“Š å®Œæˆï¼å…±æ›´æ–° {success_count} ä¸ªæ–‡ä»¶")
    print("=" * 80)
    print()
    print("âš ï¸  æ³¨æ„ï¼šæ­¤è„šæœ¬ä»…ä¸ºæ¯ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€ä¸ª system_prompt æ·»åŠ æŒ‡å—")
    print("   å¦‚éœ€ä¸ºæ‰€æœ‰å­è§’è‰²æ·»åŠ ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶æˆ–è°ƒæ•´è„šæœ¬é€»è¾‘")


if __name__ == '__main__':
    main()
