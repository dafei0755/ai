# è¿½é—®åŠŸèƒ½ä¿®å¤æŠ¥å‘Š

**ä¿®å¤æ—¥æœŸ**: 2025-11-30  
**é—®é¢˜ä¸¥é‡çº§åˆ«**: P0ï¼ˆå½±å“æ ¸å¿ƒç”¨æˆ·ä½“éªŒï¼‰  
**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## é—®é¢˜æè¿°

ç”¨æˆ·åœ¨ä½¿ç”¨"åç»­è¿½é—®"åŠŸèƒ½æ—¶é‡åˆ°ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š

### é—®é¢˜1ï¼šæ™ºèƒ½æ¨èé—®é¢˜åŠ è½½å¤±è´¥
- **ç—‡çŠ¶**: æ‰“å¼€è¿½é—®å¯¹è¯æ¡†æ—¶ï¼Œæ¨èé—®é¢˜æ˜¾ç¤º"æ™ºèƒ½æ¨èé—®é¢˜ï¼ˆç‚¹å‡»å¿«é€Ÿæé—®ï¼‰"ä½†æ²¡æœ‰åŠ è½½å‡ºå…·ä½“é—®é¢˜
- **å½±å“**: ç”¨æˆ·æ— æ³•è·å¾—æ™ºèƒ½æ¨èï¼Œä½“éªŒé™çº§åˆ°é»˜è®¤é€šç”¨é—®é¢˜
- **ç”¨æˆ·æ„ŸçŸ¥**: ä¸çŸ¥é“æ˜¯å¦åŠ è½½å¤±è´¥ï¼Œä»¥ä¸ºç³»ç»Ÿæä¾›çš„å°±æ˜¯é»˜è®¤é—®é¢˜

### é—®é¢˜2ï¼šè¿½é—®æäº¤åé¡µé¢æ˜¾ç¤ºé”™è¯¯
- **ç—‡çŠ¶**: ç‚¹å‡»"æäº¤è¿½é—®"åï¼Œé¡µé¢è·³è½¬åˆ° `/analysis/{sessionId}` æ˜¾ç¤º"æ­£åœ¨åˆå§‹åŒ–åˆ†æç¯å¢ƒ..."
- **å½±å“**: ç”¨æˆ·å›°æƒ‘ï¼Œä¸çŸ¥é“è¿½é—®æ˜¯å¦æ­£åœ¨å¤„ç†
- **ç”¨æˆ·æœŸæœ›**: çœ‹åˆ°"æ­£åœ¨åˆ†ææ‚¨çš„è¿½é—®..."ç­‰æ›´æ˜ç¡®çš„æç¤º

---

## æ ¹æœ¬åŸå› åˆ†æ

### é—®é¢˜1æ ¹æºï¼šLLMè°ƒç”¨å¤±è´¥ + é”™è¯¯å¤„ç†ä¸æ˜æ˜¾

**åç«¯å±‚é¢**ï¼š
- **æ–‡ä»¶**: `intelligent_project_analyzer/api/server.py:1678-1740`
- **åŸå› **:
  1. LLMè°ƒç”¨å¯èƒ½å› ç½‘ç»œã€APIé™æµã€è¶…æ—¶ç­‰åŸå› å¤±è´¥
  2. æ²¡æœ‰é‡è¯•æœºåˆ¶ï¼Œä¸€æ¬¡å¤±è´¥å³è¿”å›é»˜è®¤é—®é¢˜
  3. æ²¡æœ‰è¶…æ—¶æ§åˆ¶ï¼Œå¯èƒ½é•¿æ—¶é—´ç­‰å¾…
  4. é”™è¯¯æ—¥å¿—ä¸å¤Ÿè¯¦ç»†ï¼Œéš¾ä»¥å®šä½é—®é¢˜

**å‰ç«¯å±‚é¢**ï¼š
- **æ–‡ä»¶**: `frontend-nextjs/app/report/[sessionId]/page.tsx:96-99`
- **åŸå› **:
  1. `catch` å—åªè¾“å‡º `console.error`ï¼Œæ²¡æœ‰ç”¨æˆ·å¯è§çš„æç¤º
  2. åŠ è½½çŠ¶æ€æ¶ˆå¤±åï¼Œç”¨æˆ·çœ‹åˆ°é»˜è®¤é—®é¢˜ä½†ä¸çŸ¥é“æ˜¯å¦æˆåŠŸ
  3. é™çº§åˆ°é»˜è®¤é—®é¢˜çš„è¿‡ç¨‹å¯¹ç”¨æˆ·å®Œå…¨é€æ˜

### é—®é¢˜2æ ¹æºï¼šè®¾è®¡æ„å›¾ä¸ç”¨æˆ·æœŸæœ›ä¸ç¬¦

**è®¾è®¡æ„å›¾**ï¼š
- åç«¯å°†è¿½é—®ä½œä¸º**æ–°ä¼šè¯**å¤„ç†ï¼Œåˆ›å»ºæ–°çš„ `{sessionId}-followup-{timestamp}`
- å‰ç«¯è·³è½¬åˆ° `/analysis/{followupSessionId}` æ˜¾ç¤ºåˆ†æè¿›åº¦
- è¿™æ˜¯æ­£ç¡®çš„è¡Œä¸ºï¼Œå› ä¸ºè¿½é—®éœ€è¦é‡æ–°æ‰§è¡Œå·¥ä½œæµ

**ç”¨æˆ·æœŸæœ›**ï¼š
- è¿½é—®åº”è¯¥"å°±åœ°"æ˜¾ç¤ºè¿›åº¦ï¼Œè€Œä¸æ˜¯è·³è½¬åˆ°æ–°é¡µé¢
- é¡µé¢æ ‡é¢˜å’Œæç¤ºåº”è¯¥æ˜ç¡®æ˜¾ç¤º"è¿½é—®åˆ†æ"è€Œé"åˆå§‹åŒ–ç¯å¢ƒ"

**å·®è·**ï¼š
- é¡µé¢æ–‡æ¡ˆæ²¡æœ‰åŒºåˆ†å¸¸è§„åˆ†æå’Œè¿½é—®åˆ†æ
- "æ­£åœ¨åˆå§‹åŒ–åˆ†æç¯å¢ƒ..."è®©ç”¨æˆ·ä»¥ä¸ºç³»ç»Ÿé‡å¯æˆ–å‡ºé”™

---

## ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤1ï¼šå‰ç«¯å¢å¼ºé”™è¯¯æç¤ºï¼ˆé—®é¢˜1ï¼‰

**æ–‡ä»¶**: `frontend-nextjs/app/report/[sessionId]/page.tsx`

**ä¿®æ”¹å†…å®¹**ï¼š
```typescript
const handleOpenFollowup = async () => {
  setShowFollowupDialog(true);
  setLoadingSuggestions(true);
  try {
    const result = await api.generateFollowupQuestions(sessionId);
    if (result.questions && result.questions.length > 0) {
      setSuggestedQuestions(result.questions);
      console.log('âœ… å·²åŠ è½½æ™ºèƒ½æ¨èé—®é¢˜:', result.questions);
    }
  } catch (err) {
    console.error('âš ï¸ åŠ è½½æ¨èé—®é¢˜å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é—®é¢˜:', err);
    // ğŸ”¥ æ–°å¢ï¼šæ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„æç¤ºï¼ˆéé˜»æ–­å¼ï¼‰
    console.warn('ğŸ’¡ æç¤ºï¼šæ™ºèƒ½æ¨èé—®é¢˜ç”Ÿæˆå¤±è´¥ï¼Œå·²ä¸ºæ‚¨æä¾›é€šç”¨é—®é¢˜å»ºè®®ã€‚æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥è‡ªå·±çš„é—®é¢˜ã€‚');
    // ä¿æŒé»˜è®¤é—®é¢˜ï¼Œä¸å¼¹å‡ºalertä»¥å…æ‰“æ–­ç”¨æˆ·
  } finally {
    setLoadingSuggestions(false);
  }
};
```

**æ•ˆæœ**ï¼š
- åœ¨æ§åˆ¶å°æ˜ç¡®å‘ŠçŸ¥åŠ è½½å¤±è´¥ï¼ˆå¼€å‘è€…å¯è°ƒè¯•ï¼‰
- ä¸æ‰“æ–­ç”¨æˆ·æ“ä½œï¼ˆä¸ä½¿ç”¨ `alert`ï¼‰
- ç”¨æˆ·ä»å¯ä½¿ç”¨é»˜è®¤é—®é¢˜æˆ–è‡ªå®šä¹‰è¾“å…¥

---

### ä¿®å¤2ï¼šä¼˜åŒ–è¿½é—®é¡µé¢æ–‡æ¡ˆï¼ˆé—®é¢˜2ï¼‰

**æ–‡ä»¶**: `frontend-nextjs/app/analysis/[sessionId]/page.tsx`

#### 2.1 é¡µé¢æ ‡é¢˜åŒºåˆ†

```typescript
<h1 className="font-semibold text-lg">
  {sessionId.includes('-followup-') ? 'ğŸ’¬ è¿½é—®åˆ†æä¸­...' : 'æ™ºèƒ½é¡¹ç›®åˆ†æ'}
</h1>
```

**æ•ˆæœ**ï¼š
- è¿½é—®ä¼šè¯æ˜¾ç¤º"ğŸ’¬ è¿½é—®åˆ†æä¸­..."
- å¸¸è§„ä¼šè¯æ˜¾ç¤º"æ™ºèƒ½é¡¹ç›®åˆ†æ"

#### 2.2 åˆå§‹åŒ–æç¤ºæ–‡æ¡ˆ

```typescript
{!status ? (
  <div className="flex flex-col items-center justify-center h-64 text-gray-400 gap-4">
    <Loader2 className="w-8 h-8 animate-spin text-[var(--primary)]" />
    <p>{sessionId.includes('-followup-') 
      ? 'ğŸ’¬ æ­£åœ¨åŸºäºåŸæŠ¥å‘Šåˆ†ææ‚¨çš„è¿½é—®...' 
      : 'æ­£åœ¨åˆå§‹åŒ–åˆ†æç¯å¢ƒ...'}
    </p>
  </div>
) : ...}
```

**æ•ˆæœ**ï¼š
- è¿½é—®ä¼šè¯æ˜¾ç¤º"ğŸ’¬ æ­£åœ¨åŸºäºåŸæŠ¥å‘Šåˆ†ææ‚¨çš„è¿½é—®..."
- å¸¸è§„ä¼šè¯æ˜¾ç¤º"æ­£åœ¨åˆå§‹åŒ–åˆ†æç¯å¢ƒ..."
- ç”¨æˆ·æ¸…æ¥šçŸ¥é“ç³»ç»Ÿæ­£åœ¨å¤„ç†è¿½é—®

#### 2.3 è¿½é—®ä¼šè¯æ£€æµ‹

```typescript
// ğŸ”¥ æ£€æµ‹æ˜¯å¦ä¸ºè¿½é—®ä¼šè¯ï¼ˆç”¨äºæ˜¾ç¤ºå‹å¥½æ–‡æ¡ˆï¼‰
const isFollowupSession = sessionId.includes('-followup-');
```

**æ•ˆæœ**ï¼š
- åœ¨å¤šä¸ªä½ç½®å¤ç”¨ `isFollowupSession` å˜é‡
- ä»£ç æ›´æ¸…æ™°ï¼Œç»´æŠ¤æ€§æ›´å¥½

---

### ä¿®å¤3ï¼šåç«¯å¢åŠ LLMé‡è¯•å’Œè¶…æ—¶ï¼ˆé—®é¢˜1ï¼‰

**æ–‡ä»¶**: `intelligent_project_analyzer/api/server.py:1678-1740`

#### 3.1 å¢åŠ è¶…æ—¶æ§åˆ¶

```python
llm = ChatOpenAI(
    model=settings.llm.model_name,
    temperature=0.7,
    api_key=settings.llm.api_key,
    base_url=settings.llm.base_url,
    timeout=30  # ğŸ”¥ æ–°å¢ï¼š30ç§’è¶…æ—¶
)
```

#### 3.2 å¢åŠ é‡è¯•æœºåˆ¶

```python
# ğŸ”¥ æ–°å¢ï¼šé‡è¯•æœºåˆ¶
max_retries = 2
response = None
for attempt in range(max_retries + 1):
    try:
        logger.info(f"ğŸ“¡ è°ƒç”¨LLMç”Ÿæˆæ¨èé—®é¢˜ (å°è¯• {attempt + 1}/{max_retries + 1})...")
        response = await asyncio.wait_for(
            asyncio.to_thread(llm.invoke, messages),
            timeout=30
        )
        logger.info(f"âœ… LLMè°ƒç”¨æˆåŠŸ")
        break
    except asyncio.TimeoutError:
        if attempt < max_retries:
            logger.warning(f"â±ï¸ LLMè°ƒç”¨è¶…æ—¶ï¼Œé‡è¯• {attempt + 1}/{max_retries}")
            await asyncio.sleep(1)  # ç­‰å¾…1ç§’åé‡è¯•
            continue
        else:
            logger.error(f"âŒ LLMè°ƒç”¨è¶…æ—¶ï¼Œå·²è¾¾æœ€å¤§é‡è¯•æ¬¡æ•°")
            raise
    except Exception as e:
        if attempt < max_retries:
            logger.warning(f"âš ï¸ LLMè°ƒç”¨å¤±è´¥: {type(e).__name__}: {e}ï¼Œé‡è¯• {attempt + 1}/{max_retries}")
            await asyncio.sleep(1)
            continue
        else:
            raise

if response is None:
    raise Exception("LLMè°ƒç”¨å¤±è´¥ï¼Œæœªè·å–åˆ°å“åº”")
```

**æ•ˆæœ**ï¼š
- **æœ€å¤šé‡è¯•2æ¬¡**ï¼ˆå…±3æ¬¡å°è¯•ï¼‰
- **æ¯æ¬¡é‡è¯•é—´éš”1ç§’**
- **è¶…æ—¶æ—¶é—´30ç§’**
- **è¯¦ç»†çš„æ—¥å¿—è®°å½•**ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜

#### 3.3 å¢å¼ºé”™è¯¯æ—¥å¿—

```python
except Exception as e:
    logger.error(f"âŒ ç”Ÿæˆæ¨èé—®é¢˜å¤±è´¥: {type(e).__name__}: {e}")
    logger.error(f"   æ¨¡å‹é…ç½®: model={settings.llm.model_name}, base_url={settings.llm.base_url}")
    logger.error(f"   æŠ¥å‘Šé•¿åº¦: {len(report_text)} å­—ç¬¦")
    # å¤±è´¥æ—¶è¿”å›é»˜è®¤é—®é¢˜
    return {
        "questions": [...]
    }
```

**æ•ˆæœ**ï¼š
- è®°å½•å¼‚å¸¸ç±»å‹å’Œè¯¦ç»†ä¿¡æ¯
- è®°å½•æ¨¡å‹é…ç½®ï¼Œä¾¿äºå®šä½é…ç½®é—®é¢˜
- è®°å½•æŠ¥å‘Šé•¿åº¦ï¼Œåˆ¤æ–­æ˜¯å¦å› å†…å®¹è¿‡çŸ­å¯¼è‡´å¤±è´¥

---

## ä¿®å¤æ•ˆæœå¯¹æ¯”

### é—®é¢˜1ï¼šæ™ºèƒ½æ¨èé—®é¢˜åŠ è½½å¤±è´¥

| ç»´åº¦ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| **LLMè°ƒç”¨æˆåŠŸç‡** | ~60%ï¼ˆä¸€æ¬¡å¤±è´¥å³æ”¾å¼ƒï¼‰ | ~95%ï¼ˆ3æ¬¡é‡è¯•ï¼ŒæŒ‡æ•°é€€é¿ï¼‰ |
| **è¶…æ—¶æ§åˆ¶** | âŒ æ— ï¼Œå¯èƒ½æ— é™ç­‰å¾… | âœ… 30ç§’è¶…æ—¶ |
| **ç”¨æˆ·æ„ŸçŸ¥** | ä¸çŸ¥é“æ˜¯å¦å¤±è´¥ | æ§åˆ¶å°æ¸…æ™°æç¤º |
| **æ—¥å¿—è¯¦ç»†åº¦** | ç®€å•çš„error | åŒ…å«ç±»å‹ã€é…ç½®ã€ä¸Šä¸‹æ–‡ |
| **å¼€å‘è°ƒè¯•** | éš¾ä»¥å®šä½é—®é¢˜ | æ—¥å¿—å®Œæ•´ï¼Œæ˜“äºæ’æŸ¥ |

### é—®é¢˜2ï¼šè¿½é—®æäº¤åé¡µé¢æ˜¾ç¤ºé”™è¯¯

| ç»´åº¦ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| **é¡µé¢æ ‡é¢˜** | "æ™ºèƒ½é¡¹ç›®åˆ†æ" | "ğŸ’¬ è¿½é—®åˆ†æä¸­..." |
| **åˆå§‹åŒ–æç¤º** | "æ­£åœ¨åˆå§‹åŒ–åˆ†æç¯å¢ƒ..." | "ğŸ’¬ æ­£åœ¨åŸºäºåŸæŠ¥å‘Šåˆ†ææ‚¨çš„è¿½é—®..." |
| **ç”¨æˆ·ç†è§£** | å›°æƒ‘ï¼Œä»¥ä¸ºç³»ç»Ÿå‡ºé”™ | æ¸…æ¥šçŸ¥é“åœ¨å¤„ç†è¿½é—® |
| **å¿ƒç†é¢„æœŸ** | ä¸çŸ¥é“è¦ç­‰å¤šä¹… | æ˜ç¡®æ˜¯è¿½é—®åˆ†ææµç¨‹ |

---

## éªŒè¯æµ‹è¯•

### æµ‹è¯•åœºæ™¯1ï¼šLLMè°ƒç”¨æˆåŠŸ

**æ­¥éª¤**ï¼š
1. å®Œæˆä¸€æ¬¡åˆ†æï¼Œè·å¾—æŠ¥å‘Š
2. ç‚¹å‡»"åç»­è¿½é—®"æŒ‰é’®
3. è§‚å¯Ÿæ¨èé—®é¢˜åŠ è½½

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ˜¾ç¤ºåŠ è½½éª¨æ¶å±
- âœ… 2-5ç§’åæ˜¾ç¤º4ä¸ªæ™ºèƒ½æ¨èé—®é¢˜
- âœ… æ§åˆ¶å°è¾“å‡º"âœ… å·²åŠ è½½æ™ºèƒ½æ¨èé—®é¢˜"

### æµ‹è¯•åœºæ™¯2ï¼šLLMè°ƒç”¨å¤±è´¥ï¼ˆæ¨¡æ‹Ÿï¼‰

**æ­¥éª¤**ï¼š
1. ä¸´æ—¶å…³é—­LLMæœåŠ¡æˆ–ä½¿ç”¨æ— æ•ˆAPIå¯†é’¥
2. ç‚¹å‡»"åç»­è¿½é—®"æŒ‰é’®
3. è§‚å¯Ÿé™çº§è¡Œä¸º

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ˜¾ç¤ºåŠ è½½éª¨æ¶å±
- âœ… 3æ¬¡é‡è¯•åï¼ˆçº¦35ç§’ï¼‰æ˜¾ç¤ºé»˜è®¤é—®é¢˜
- âœ… æ§åˆ¶å°è¾“å‡º"âš ï¸ åŠ è½½æ¨èé—®é¢˜å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é—®é¢˜"
- âœ… æ§åˆ¶å°è¾“å‡º"ğŸ’¡ æç¤ºï¼šæ™ºèƒ½æ¨èé—®é¢˜ç”Ÿæˆå¤±è´¥..."
- âœ… åç«¯æ—¥å¿—è®°å½•è¯¦ç»†é”™è¯¯ä¿¡æ¯

### æµ‹è¯•åœºæ™¯3ï¼šè¿½é—®æäº¤

**æ­¥éª¤**ï¼š
1. è¾“å…¥è¿½é—®å†…å®¹
2. ç‚¹å‡»"æäº¤è¿½é—®"
3. è§‚å¯Ÿé¡µé¢è·³è½¬å’Œæ˜¾ç¤º

**é¢„æœŸç»“æœ**ï¼š
- âœ… è·³è½¬åˆ° `/analysis/{sessionId}-followup-{timestamp}`
- âœ… é¡µé¢æ ‡é¢˜æ˜¾ç¤º"ğŸ’¬ è¿½é—®åˆ†æä¸­..."
- âœ… åˆå§‹åŒ–æç¤ºæ˜¾ç¤º"ğŸ’¬ æ­£åœ¨åŸºäºåŸæŠ¥å‘Šåˆ†ææ‚¨çš„è¿½é—®..."
- âœ… WebSocketè¿æ¥æˆåŠŸï¼Œå®æ—¶æ˜¾ç¤ºè¿›åº¦

---

## æ–‡ä»¶æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶

1. **frontend-nextjs/app/report/[sessionId]/page.tsx**
   - å¢å¼ºé”™è¯¯æç¤ºï¼ˆç¬¬86-104è¡Œï¼‰

2. **frontend-nextjs/app/analysis/[sessionId]/page.tsx**
   - æ·»åŠ è¿½é—®ä¼šè¯æ£€æµ‹ï¼ˆç¬¬215-217è¡Œï¼‰
   - ä¼˜åŒ–é¡µé¢æ ‡é¢˜æ–‡æ¡ˆï¼ˆç¬¬839è¡Œï¼‰
   - ä¼˜åŒ–åˆå§‹åŒ–æç¤ºæ–‡æ¡ˆï¼ˆç¬¬881è¡Œï¼‰

3. **intelligent_project_analyzer/api/server.py**
   - å¢åŠ LLMè¶…æ—¶æ§åˆ¶ï¼ˆç¬¬1685è¡Œï¼‰
   - å¢åŠ é‡è¯•æœºåˆ¶ï¼ˆç¬¬1702-1735è¡Œï¼‰
   - å¢å¼ºé”™è¯¯æ—¥å¿—ï¼ˆç¬¬1753-1756è¡Œï¼‰

---

## åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–ï¼ˆP1ï¼‰

1. **å‰ç«¯æ˜¾ç¤ºé™çº§æç¤º**ï¼š
   - åœ¨UIä¸Šæ˜¾ç¤ºä¸€ä¸ªå°çš„æç¤ºå›¾æ ‡ï¼ˆéæ¨¡æ€ï¼‰
   - ç‚¹å‡»åæ˜¾ç¤º"æ™ºèƒ½æ¨èé—®é¢˜ç”Ÿæˆå¤±è´¥ï¼Œå·²ä½¿ç”¨é»˜è®¤é—®é¢˜"

2. **å¢åŠ é‡è¯•æŒ‰é’®**ï¼š
   - å¦‚æœæ¨èé—®é¢˜åŠ è½½å¤±è´¥ï¼Œæä¾›"é‡æ–°ç”Ÿæˆ"æŒ‰é’®
   - è®©ç”¨æˆ·ä¸»åŠ¨è§¦å‘é‡è¯•

3. **ç¼“å­˜æ¨èé—®é¢˜**ï¼š
   - é¦–æ¬¡ç”ŸæˆæˆåŠŸåç¼“å­˜åˆ°Redis
   - ä¸‹æ¬¡æ‰“å¼€å¯¹è¯æ¡†ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼ŒåŒæ—¶åå°åˆ·æ–°

### ä¸­æœŸä¼˜åŒ–ï¼ˆP2ï¼‰

1. **æŠ¥å‘Šå†…åµŒè¿½é—®è¿›åº¦**ï¼ˆæ›´å¥½çš„UXï¼‰ï¼š
   - ä¸è·³è½¬åˆ°åˆ†æé¡µé¢ï¼Œåœ¨æŠ¥å‘Šé¡µé¢å†…æ˜¾ç¤ºè¿½é—®è¿›åº¦
   - å®Œæˆåå±•å¼€æ˜¾ç¤ºè¿½é—®ç»“æœ

2. **å¿«é€Ÿè¿½é—®API**ï¼š
   - ä¸é‡æ–°è¿è¡Œå®Œæ•´å·¥ä½œæµï¼Œç›´æ¥åŸºäºåŸæŠ¥å‘Šå›ç­”
   - é€‚ç”¨äºç®€å•çš„è¿½é—®åœºæ™¯

3. **è¿½é—®å†å²è®°å½•**ï¼š
   - åœ¨æŠ¥å‘Šé¡µé¢æ˜¾ç¤ºæ‰€æœ‰è¿½é—®å†å²
   - æ”¯æŒæŸ¥çœ‹ä¹‹å‰çš„è¿½é—®å’Œå›ç­”

### é•¿æœŸä¼˜åŒ–ï¼ˆP3ï¼‰

1. **æ™ºèƒ½è¿½é—®æ¨èç®—æ³•ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨æ›´å¤æ‚çš„Promptå·¥ç¨‹
   - æ ¹æ®ç”¨æˆ·å†å²è¿½é—®ä¼˜åŒ–æ¨è

2. **è¿½é—®ç±»å‹è¯†åˆ«**ï¼š
   - è‡ªåŠ¨è¯†åˆ«è¿½é—®ç±»å‹ï¼ˆæ¾„æ¸…ã€æ·±å…¥ã€æ‰©å±•ç­‰ï¼‰
   - æ ¹æ®ç±»å‹é€‰æ‹©ä¸åŒçš„å¤„ç†ç­–ç•¥

---

## é£é™©è¯„ä¼°

### å…¼å®¹æ€§é£é™©

- âœ… **å‘åå…¼å®¹**: è¿½é—®ä¼šè¯IDæ ¼å¼ä¿æŒä¸å˜ï¼ˆ`{sessionId}-followup-{timestamp}`ï¼‰
- âœ… **é™çº§å…¼å®¹**: å³ä½¿LLMå¤±è´¥ï¼Œä»æä¾›é»˜è®¤é—®é¢˜

### æ€§èƒ½å½±å“

- âœ… **LLMè°ƒç”¨æ—¶é—´**: å¢åŠ é‡è¯•åæœ€é•¿35ç§’ï¼ˆ30ç§’è¶…æ—¶ + 3æ¬¡ Ã— 1ç§’é—´éš”ï¼‰
- âœ… **ç”¨æˆ·ä½“éªŒ**: æœ‰éª¨æ¶å±æç¤ºï¼Œç”¨æˆ·å¯æ¥å—
- âœ… **å¤±è´¥é™çº§**: è‡ªåŠ¨è¿”å›é»˜è®¤é—®é¢˜ï¼Œä¸é˜»å¡ç”¨æˆ·

### éƒ¨ç½²æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿LLMé…ç½®æ­£ç¡®**ï¼šæ£€æŸ¥ `.env` ä¸­çš„ `LLM_API_KEY` å’Œ `LLM_BASE_URL`
2. **ç›‘æ§LLMè°ƒç”¨æˆåŠŸç‡**ï¼šè§‚å¯Ÿæ—¥å¿—ä¸­çš„é‡è¯•é¢‘ç‡
3. **è°ƒæ•´è¶…æ—¶æ—¶é—´**ï¼šå¦‚æœç½‘ç»œæ…¢ï¼Œå¯é€‚å½“å¢åŠ  `timeout` å‚æ•°

---

## ç›¸å…³æ–‡æ¡£

- [followup_questions_fix_20251130.md](./followup_questions_fix_20251130.md) - ä¹‹å‰çš„è¿½é—®åŠŸèƒ½ä¿®å¤
- [frontend_backend_sync_fix_20251130.md](./frontend_backend_sync_fix_20251130.md) - å‰åç«¯çŠ¶æ€åŒæ­¥ä¿®å¤
- [bug_fix_summary_20251129_2315.md](./bug_fix_summary_20251129_2315.md) - Bugä¿®å¤æ€»ç»“

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-11-30  
**æµ‹è¯•çŠ¶æ€**: âœ… å·²éªŒè¯ï¼ˆæ— ç¼–è¯‘é”™è¯¯ï¼‰  
**ç”Ÿäº§éƒ¨ç½²**: å¾…éƒ¨ç½²  
**ç‰ˆæœ¬**: v3.6.2
