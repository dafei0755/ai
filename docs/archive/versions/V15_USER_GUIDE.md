# V1.5 项目可行性分析师 - 用户使用指南

**版本**: v1.0
**最后更新**: 2025-12-06
**目标用户**: 业主、项目经理、决策者

---

## 目录

1. [快速开始](#快速开始)
2. [什么是V1.5可行性分析师？](#什么是v15可行性分析师)
3. [何时使用？](#何时使用)
4. [输出解读](#输出解读)
5. [典型使用场景](#典型使用场景)
6. [常见问题](#常见问题)
7. [最佳实践](#最佳实践)

---

## 快速开始

### 5分钟体验

**Step 1**: 提供项目需求

```
用户输入:
"我想装修一个200㎡的别墅，预算20万，要全进口材料、智能家居和私人影院，2个月完工"
```

**Step 2**: 系统自动分析

```python
# 系统内部流程（自动执行）
v1_output = requirements_analyst.analyze(user_input)  # V1战略洞察
v15_output = feasibility_analyst.analyze(v1_output)   # V1.5可行性验证
```

**Step 3**: 查看可行性报告

```
【可行性评估】
总体可行性: ⚠️ 低 (low)
关键问题:
  - ❌ 预算缺口17万（超预算85%）
  - ⚠️ 工期紧张（标准工期需3个月）

【推荐方案】
✅ 方案A: 分期实施（推荐）
  - 一期20万：完成基础装修+智能家居
  - 二期15万：实现私人影院
  - 优势：预算达标，风险可控
```

---

## 什么是V1.5可行性分析师？

### 核心功能

V1.5可行性分析师是智能需求分析系统的**可行性验证模块**，提供4大核心功能：

#### 1. 资源约束验证 ✅

**回答问题**: "预算/时间/空间够不够用？"

**验证维度**:
- 💰 **预算可行性**: 需求成本 vs 可用预算
- ⏰ **时间可行性**: 所需工期 vs 可用工期
- 📐 **空间可行性**: 所需面积 vs 可用面积

**输出形式**: 数值化冲突检测（缺口多少、严重性分级）

---

#### 2. 冲突检测引擎 🔍

**识别类型**:

| 冲突类型 | 示例 | 严重性分级 |
|---------|------|-----------|
| **预算vs功能** | "20万预算要40万功能" | critical/high/medium/low |
| **时间vs质量** | "2个月要完成3个月的精装修" | critical/high/medium/low |
| **空间vs功能** | "60㎡要4房2厅4独立卫生间" | critical/high/medium/low |

**严重性判断标准**:

```
预算冲突:
  - critical: 总成本 ≥ 预算 × 1.5 (超预算50%+)
  - high: 总成本 ≥ 预算 × 1.25 (超预算25-50%)
  - medium: 总成本 ≥ 预算 × 1.1 (超预算10-25%)
  - low: 总成本 ≥ 预算 × 1.05 (超预算5-10%)

时间冲突:
  - critical: 所需工期 ≥ 可用工期 × 2.0
  - high: 所需工期 ≥ 可用工期 × 1.5
  - medium: 所需工期 ≥ 可用工期 × 1.2

空间冲突:
  - critical: 所需面积 ≥ 可用面积 × 1.5
  - high: 所需面积 ≥ 可用面积 × 1.3
  - medium: 所需面积 ≥ 可用面积 × 1.15
```

---

#### 3. 智能优先级排序 🎯

**计算公式**:

```
priority_score = stakeholder_weight × necessity_level × time_sensitivity
```

**维度说明**:

**利益相关者权重** (stakeholder_weight):
- 业主需求: 0.40
- 家庭成员需求: 0.30
- 访客体验: 0.15
- 投资回报: 0.15

**需求层次权重** (necessity_level) - 基于马斯洛需求层次:
- 生存需求（水电/结构）: 1.0
- 安全需求（消防/防盗）: 0.85
- 舒适需求（智能家居）: 0.70
- 尊重需求（品牌材料）: 0.60
- 自我实现（艺术/收藏）: 0.50

**时间敏感性** (time_sensitivity):
- urgent（入住deadline）: 1.0
- important（核心功能）: 0.75
- normal（常规需求）: 0.50
- nice_to_have（锦上添花）: 0.30

**示例计算**:

```python
# 智能家居系统
priority_score = 0.40 × 0.70 × 0.75 = 0.21 (高优先级)
  - 业主+家庭成员需求（0.40）
  - 舒适需求（0.70）
  - 重要功能（0.75）

# 私人影院
priority_score = 0.40 × 0.50 × 0.50 = 0.10 (低优先级)
  - 业主个人需求（0.40）
  - 自我实现需求（0.50）
  - 一般需求（0.50）

结论: 预算不足时，优先保留智能家居，削减或延后私人影院
```

---

#### 4. 决策建议生成 💡

**方案类型**:

| 方案类型 | 策略 | 适用场景 |
|---------|------|---------|
| **保预算方案** | 削减低优先级需求 | 预算硬约束，不能超支 |
| **保品质方案** | 增加预算投入 | 追求品质，预算可协商 |
| **分期实施方案** | 核心需求先做，扩展功能后做 | 既要品质又要预算可控 |
| **降级替代方案** | 保留功能但降低配置 | 功能不可削减但可接受品质下降 |

**每个方案包含**:
- ✅ 调整内容（保留什么、削减什么）
- 💰 调整后成本（总成本、与预算的差距）
- ⚖️ 权衡分析（优点vs缺点）
- 🏆 推荐度（recommended: true/false）

---

## 何时使用？

### 适用场景 ✅

**1. 项目规划阶段**

```
用户: "我有个项目想法，但不确定能不能做"
V1.5: 提供可行性评估 + 资源缺口分析
```

**2. 预算确定时**

```
用户: "我的预算是20万，不知道能做到什么程度"
V1.5: 匹配预算与需求，标注哪些可行、哪些需调整
```

**3. 需求冲突时**

```
用户: "我想要A、B、C，但预算/时间/空间可能不够"
V1.5: 检测冲突 + 提供优先级建议
```

**4. 方案对比时**

```
用户: "保预算还是保品质？如何权衡？"
V1.5: 生成3-5个方案，标注每个方案的利弊
```

---

### 不适用场景 ❌

**1. 纯创意头脑风暴**

```
用户: "我想要一个有未来感的设计，给我一些灵感"
→ 此时仅需V1战略洞察，V1.5的可行性验证不必要
```

**2. 预算/工期完全未定**

```
用户: "我还不知道预算，只是想看看有哪些可能性"
→ V1.5需要明确的约束条件才能验证可行性
```

**3. 概念设计阶段**

```
用户: "帮我探索设计可能性，不用考虑预算"
→ 此时约束条件可忽略，V1战略洞察即可
```

---

## 输出解读

### 完整输出结构

```json
{
  "feasibility_assessment": {
    "overall_feasibility": "low/medium/high",
    "critical_issues": ["问题1", "问题2"],
    "summary": "简要总结"
  },

  "conflict_detection": {
    "budget_conflicts": [...],
    "timeline_conflicts": [...],
    "space_conflicts": [...]
  },

  "priority_matrix": [
    {
      "requirement": "需求名称",
      "priority_score": 0.21,
      "rank": 1,
      "estimated_cost": 60000,
      "rationale": "优先级理由"
    }
  ],

  "recommendations": [
    {
      "name": "方案A",
      "strategy": "策略描述",
      "adjustments": ["调整1", "调整2"],
      "adjusted_cost": {...},
      "trade_offs": {"pros": [...], "cons": [...]},
      "recommended": true
    }
  ],

  "risk_flags": [
    {
      "type": "预算风险",
      "severity": "critical",
      "description": "风险描述",
      "mitigation": "缓解措施"
    }
  ]
}
```

---

### 重点字段解读

#### 1. feasibility_assessment（可行性评估）

**overall_feasibility** - 总体可行性:
- `high`: ✅ 资源充足，可直接实施
- `medium`: ⚠️ 存在一定风险，需小幅调整
- `low`: ❌ 资源严重不足，需大幅调整

**critical_issues** - 关键问题:
- 列出所有`critical`和`high`级别的冲突
- 按严重性排序

**summary** - 总结:
- 2-3句话概括可行性和主要建议

**如何解读**:

```
✅ overall_feasibility: "high"
→ 项目可行，放心推进

⚠️ overall_feasibility: "medium" + critical_issues: ["预算缺口5万"]
→ 基本可行，但需小幅调整预算或削减部分需求

❌ overall_feasibility: "low" + critical_issues: ["预算缺口20万", "工期不足30天"]
→ 当前方案不可行，必须大幅调整（选择推荐方案）
```

---

#### 2. conflict_detection（冲突检测）

**结构**:

```json
{
  "budget_conflicts": [
    {
      "type": "预算vs功能冲突",
      "severity": "critical",  // critical/high/medium/low/none
      "detected": true,
      "details": {
        "available_budget": 200000,
        "estimated_cost": 370000,
        "gap": 170000,
        "gap_percentage": 85
      },
      "description": "预算20万，但需求成本37万，缺口17万（超预算85%）"
    }
  ]
}
```

**如何解读**:

| severity | 含义 | 建议行动 |
|----------|------|---------|
| **critical** | 🔴 严重冲突（超50%+） | 必须调整，否则项目无法实施 |
| **high** | 🟠 高等级冲突（超25-50%） | 强烈建议调整 |
| **medium** | 🟡 中等冲突（超10-25%） | 建议调整，或接受小风险 |
| **low** | 🟢 轻微冲突（超5-10%） | 可接受，无需调整 |
| **none** | ✅ 无冲突 | 资源充足 |

---

#### 3. priority_matrix（优先级矩阵）

**结构**:

```json
{
  "priority_matrix": [
    {
      "requirement": "全屋智能家居系统",
      "priority_score": 0.216,  // 0-1范围，越大越优先
      "breakdown": {
        "stakeholder_weight": 0.40,
        "necessity_level": 0.60,
        "time_sensitivity": 0.90
      },
      "rank": 1,  // 优先级排名
      "estimated_cost": 60000,
      "rationale": "三口之家核心需求，属于舒适需求，工期紧张"
    }
  ]
}
```

**如何使用**:

**场景1: 预算不足，需要削减需求**

```
查看priority_matrix，按rank排序:
  1. 智能家居 (score: 0.21, cost: 6万) ← 优先保留
  2. 基础装修 (score: 0.18, cost: 20万) ← 优先保留
  3. 私人影院 (score: 0.10, cost: 9万) ← 优先削减

决策: 削减私人影院，节省9万，预算压力降低
```

**场景2: 工期不足，需要分期实施**

```
查看priority_matrix + time_sensitivity:
  - 智能家居 (time_sensitivity: 0.90) ← urgent，一期完成
  - 私人影院 (time_sensitivity: 0.50) ← normal，二期完成

决策: 一期完成高时间敏感性需求，二期扩展
```

---

#### 4. recommendations（决策建议）

**结构**:

```json
{
  "recommendations": [
    {
      "name": "方案A: 保预算方案",
      "strategy": "优先保留高优先级需求，削减低优先级",
      "adjustments": [
        "保留: 智能家居（5.5万）",
        "削减: 私人影院 → 改为观影区（节省6万）",
        "降级: 全进口材料 → 国产高端（节省8万）"
      ],
      "adjusted_cost": {
        "total": 200000,
        "gap_from_budget": 0,
        "savings": 140000
      },
      "timeline": {
        "total_days": 70,
        "feasibility": "可行（延后10天）"
      },
      "trade_offs": {
        "pros": [
          "预算达标",
          "核心功能保留",
          "施工周期不变"
        ],
        "cons": [
          "品质下降20%",
          "影院功能缺失",
          "未来扩展成本高"
        ]
      },
      "recommended": true  // ✅ 系统推荐
    }
  ]
}
```

**如何选择方案**:

**Step 1**: 查看`recommended: true`的方案（系统推荐）

**Step 2**: 对比各方案的`trade_offs`（权衡分析）:

```
方案A（保预算）:
  ✅ 优点: 预算达标、风险低
  ❌ 缺点: 品质下降20%、影院功能缺失

方案B（保品质）:
  ✅ 优点: 品质完全达标、长期满意度高
  ❌ 缺点: 预算超支75%、资金压力大

方案C（分期实施）:
  ✅ 优点: 一期预算达标、可先入住体验
  ❌ 缺点: 二期施工影响居住、总成本可能增加10-15%
```

**Step 3**: 根据自身情况选择:

| 情况 | 推荐方案 |
|------|---------|
| 预算硬约束，不能超支 | 方案A（保预算） |
| 追求品质，预算可协商 | 方案B（保品质） |
| 既要品质又要可控 | 方案C（分期） |
| 功能不可削减 | 方案D（降级替代） |

---

#### 5. risk_flags（风险标记）

**结构**:

```json
{
  "risk_flags": [
    {
      "type": "预算风险",
      "severity": "critical",
      "description": "当前预算与需求成本差距达17万（85%），属于严重资源不匹配",
      "mitigation": "建议选择方案A（分期）或方案B（削减），避免超预算导致项目烂尾"
    },
    {
      "type": "工期风险",
      "severity": "medium",
      "description": "2个月工期对200㎡别墅偏紧，赶工可能影响质量",
      "mitigation": "如选择方案A一期，60天可完成基础装修；或延长至75-80天"
    }
  ]
}
```

**如何解读**:

| severity | 风险等级 | 建议行动 |
|----------|---------|---------|
| **critical** | 🔴 高风险 | 必须采取缓解措施，否则项目可能失败 |
| **high** | 🟠 较高风险 | 强烈建议采取缓解措施 |
| **medium** | 🟡 中等风险 | 建议关注，可接受但需监控 |
| **low** | 🟢 低风险 | 风险可控，无需特别措施 |

**查看mitigation（缓解措施）**:

系统会针对每个风险提供具体的应对建议。

---

## 典型使用场景

### 场景1: 预算冲突检测

**用户输入**:
```
"我想装修一个200㎡的别墅，预算20万，要求：
 - 全进口材料
 - 全屋智能家居系统
 - 定制私人影院"
```

**V1.5输出解读**:

```json
{
  "feasibility_assessment": {
    "overall_feasibility": "low",  // ❌ 不可行
    "critical_issues": ["预算缺口17万（超预算85%）"]
  },

  "conflict_detection": {
    "budget_conflicts": [{
      "severity": "critical",  // 🔴 严重冲突
      "details": {
        "available_budget": 200000,
        "estimated_cost": 370000,  // 智能家居6万+影院9万+装修22万
        "gap": 170000,  // 缺口17万
        "gap_percentage": 85  // 超预算85%
      }
    }]
  },

  "priority_matrix": [
    {"requirement": "全屋智能家居", "priority_score": 0.21, "rank": 1},  // 最高优先级
    {"requirement": "基础装修", "priority_score": 0.18, "rank": 2},
    {"requirement": "私人影院", "priority_score": 0.10, "rank": 3}  // 最低优先级
  ],

  "recommendations": [
    {
      "name": "方案A: 分期实施（推荐）",
      "adjustments": [
        "一期20万: 基础装修+智能家居（核心功能）",
        "二期15万: 私人影院（提升功能）"
      ],
      "trade_offs": {
        "pros": ["一期预算达标", "分散资金压力"],
        "cons": ["二期施工影响居住", "总成本可能增加10-15%"]
      },
      "recommended": true
    }
  ]
}
```

**用户决策建议**:

1. ✅ **接受现实**: 预算20万无法满足所有需求（成本37万，缺口17万）
2. 🎯 **明确优先级**: 智能家居（0.21）> 基础装修（0.18）> 私人影院（0.10）
3. 💡 **选择方案**:
   - 如果预算硬约束 → 方案A（分期实施）或方案B（削减影院）
   - 如果预算可协商 → 方案C（增加预算至35-37万）
4. ⚠️ **风险提示**: 如果强行推进，可能导致项目烂尾（预算耗尽时功能未完成）

---

### 场景2: 时间冲突检测

**用户输入**:
```
"2个月完成200㎡精装修，要求工艺精细，不能有任何瑕疵"
```

**V1.5输出解读**:

```json
{
  "conflict_detection": {
    "timeline_conflicts": [{
      "severity": "high",  // 🟠 高等级冲突
      "details": {
        "available_days": 60,  // 2个月
        "required_days": 90,  // 精装修标准工期
        "gap": 30  // 缺口30天
      },
      "description": "2个月（60天）完成200㎡精装修，标准工期需90天，存在30天缺口"
    }]
  },

  "recommendations": [
    {
      "name": "方案A: 调整质量预期",
      "adjustments": [
        "从'无瑕疵'标准降至'优良'标准（可接受微小瑕疵）",
        "工期可缩短至70-75天，接近2个月"
      ],
      "trade_offs": {
        "pros": ["工期基本满足", "成本不增加"],
        "cons": ["质量标准下降10-15%", "可能出现小瑕疵"]
      }
    },
    {
      "name": "方案B: 延长工期",
      "adjustments": [
        "工期从2个月延长至3个月",
        "保持'无瑕疵'质量标准"
      ],
      "trade_offs": {
        "pros": ["质量完全达标", "施工不赶工"],
        "cons": ["工期延长50%", "入住时间延后"]
      },
      "recommended": true
    }
  ]
}
```

**用户决策建议**:

1. ⚠️ **认识矛盾**: "2个月"与"无瑕疵精装修"存在时间vs质量冲突
2. 💡 **选择权衡**:
   - 如果入住时间硬约束 → 方案A（接受质量下降10-15%）
   - 如果质量不可妥协 → 方案B（延长工期至3个月）
3. 📊 **数据支撑**: 精装修标准工期90天，60天属于赶工（质量风险+20%）

---

### 场景3: 空间冲突检测

**用户输入**:
```
"60㎡小户型要4房2厅，每个房间都要独立卫生间"
```

**V1.5输出解读**:

```json
{
  "conflict_detection": {
    "space_conflicts": [{
      "severity": "high",  // 🟠 高等级冲突
      "details": {
        "available_area": 60,  // 可用面积
        "required_area": 86,  // 所需面积（4房40+2厅30+4卫16）
        "gap": 26  // 缺口26㎡
      },
      "description": "可用面积60㎡，但需要至少86㎡，缺口26㎡（43%）"
    }]
  },

  "recommendations": [
    {
      "name": "方案A: 调整户型配置（推荐）",
      "adjustments": [
        "从4房2厅4独立卫 → 2房2厅2独立卫",
        "所需面积：2房20+2厅30+2卫8=58㎡（可行）"
      ],
      "trade_offs": {
        "pros": ["空间充足", "舒适度高"],
        "cons": ["房间数减少50%", "家庭成员可能不够用"]
      },
      "recommended": true
    },
    {
      "name": "方案B: 多功能房设计",
      "adjustments": [
        "3房（其中1个多功能房，可兼做客房/书房/储藏）",
        "2厅（客厅+餐厅）",
        "2独立卫+1公共卫",
        "所需面积：3房30+2厅30+3卫12=72㎡（紧凑但可行）"
      ],
      "trade_offs": {
        "pros": ["功能相对完整", "灵活性高"],
        "cons": ["空间紧凑", "舒适度下降20%"]
      }
    }
  ]
}
```

**用户决策建议**:

1. ❌ **认清限制**: 60㎡物理上无法容纳4房2厅4独立卫（需要86㎡）
2. 🎯 **明确需求**: 是"4个房间"重要，还是"每个房间独立卫生间"重要？
3. 💡 **选择方案**:
   - 如果家庭成员≤4人 → 方案A（2房2厅，空间舒适）
   - 如果确需多房间 → 方案B（3房+多功能房，空间紧凑）
4. 📐 **设计优化**: 考虑使用折叠家具、榻榻米等节省空间的设计

---

### 场景4: 优先级排序

**用户输入**:
```
"预算有限，请帮我排序：智能家居、私人影院、全进口材料、精装修"
```

**V1.5输出解读**:

```json
{
  "priority_matrix": [
    {
      "requirement": "智能家居系统",
      "priority_score": 0.21,
      "rank": 1,
      "estimated_cost": 60000,
      "breakdown": {
        "stakeholder_weight": 0.40,  // 业主+家庭成员
        "necessity_level": 0.70,      // 舒适需求
        "time_sensitivity": 0.75      // 重要功能
      },
      "rationale": "业主+家庭成员共同需求，提升日常生活便捷性，属于核心功能"
    },
    {
      "requirement": "精装修",
      "priority_score": 0.18,
      "rank": 2,
      "estimated_cost": 200000,
      "rationale": "基础装修属于必需，但可调整档次（从精装降至标准装修）"
    },
    {
      "requirement": "全进口材料",
      "priority_score": 0.12,
      "rank": 3,
      "estimated_cost": 100000,
      "rationale": "尊重需求，展示品味，但可用国产高端品牌替代"
    },
    {
      "requirement": "私人影院",
      "priority_score": 0.10,
      "rank": 4,
      "estimated_cost": 90000,
      "rationale": "自我实现需求，业主个人爱好，可延后至二期实施"
    }
  ],

  "recommendations": [
    {
      "name": "预算削减建议",
      "adjustments": [
        "✅ 优先保留: 智能家居（6万）- 优先级最高",
        "✅ 优先保留: 标准装修（降级，从精装20万→标准15万，节省5万）",
        "⚠️ 可选: 全进口材料 → 国产高端（从10万→5万，节省5万）",
        "❌ 建议削减: 私人影院 → 延后至二期（节省9万）"
      ],
      "adjusted_cost": {
        "total": 220000,  // 智能6+装修15+材料5=26万 → 调整后22万
        "savings": 190000  // 节省19万
      }
    }
  ]
}
```

**用户决策建议**:

1. 🎯 **明确排序**: 智能家居(0.21) > 精装修(0.18) > 进口材料(0.12) > 私人影院(0.10)
2. 💡 **削减策略**:
   - 优先保留高优先级（智能家居）
   - 可降级但保留功能（精装→标准装修）
   - 可替代实现（进口材料→国产高端）
   - 可延后实施（私人影院→二期）
3. 📊 **成本节省**: 通过降级和削减，从41万降至22万，节省19万

---

## 常见问题

### Q1: V1.5的成本估算准确吗？

**A**: V1.5的成本估算基于行业平均数据，**准确度约±20%**。

**原因**:
- ✅ 优势：基于大量行业标准数据
- ⚠️ 限制：实际成本受地域、品牌、工艺、市场波动影响

**建议**:
- 将V1.5的估算作为"初步参考"
- 实际决策前，获取3-5家正式报价
- 预留10-15%的预算缓冲

**示例**:

```
V1.5估算: 智能家居 5.5万
实际报价: 小米全屋智能 4.2万（入门）
          海尔全屋智能 6.8万（中端）
          Control4高端系统 12万（高端）

结论: V1.5估算的5.5万接近中端水平，符合预期
```

---

### Q2: 冲突严重性如何判断？

**A**: 冲突严重性基于**比例阈值**，而非绝对值。

**判断逻辑**:

```python
# 预算冲突
cost_ratio = 估算成本 / 可用预算

if cost_ratio >= 1.5:    # 总成本是预算的1.5倍+
    severity = "critical"  # 🔴 严重冲突
elif cost_ratio >= 1.25:  # 1.25-1.5倍
    severity = "high"      # 🟠 高等级
elif cost_ratio >= 1.1:   # 1.1-1.25倍
    severity = "medium"    # 🟡 中等
else:
    severity = "low"       # 🟢 轻微
```

**示例**:

```
案例1: 预算20万，成本30万
  cost_ratio = 30/20 = 1.5 → "critical"（超50%）

案例2: 预算100万，成本110万
  cost_ratio = 110/100 = 1.1 → "medium"（超10%）

结论: 虽然案例2的绝对缺口（10万）大于案例1的缺口（10万），
      但案例1的相对缺口（50%）更严重，因此severity更高
```

---

### Q3: 优先级分数如何理解？

**A**: 优先级分数范围0-1，**越大越优先**。

**分数区间参考**:

| 分数区间 | 优先级等级 | 建议 |
|---------|----------|------|
| 0.20-1.00 | 🔴 极高优先级 | 必须保留，核心需求 |
| 0.15-0.20 | 🟠 高优先级 | 强烈建议保留 |
| 0.10-0.15 | 🟡 中等优先级 | 可保留，但可削减 |
| 0.05-0.10 | 🟢 低优先级 | 可延后或削减 |
| 0-0.05 | ⚪ 极低优先级 | 建议削减 |

**分数构成**:

```
priority_score = stakeholder_weight × necessity_level × time_sensitivity

示例1: 智能家居
  = 0.40 × 0.70 × 0.75
  = 0.21（极高优先级）

示例2: 私人影院
  = 0.40 × 0.50 × 0.50
  = 0.10（中等优先级）

结论: 预算不足时，优先保留智能家居，削减私人影院
```

---

### Q4: 如果我不同意V1.5的优先级排序？

**A**: V1.5的优先级是基于通用模型计算的**参考建议**，您可以根据自身情况调整。

**调整方式**:

**方式1: 手动调整权重**（需要技术支持）

```yaml
# 修改 industry_standards.yaml

# 如果您更看重家庭成员需求，而非业主个人需求：
stakeholder_weights:
  residential:
    owner: 0.30          # 降低业主权重
    family_members: 0.50  # 提高家庭成员权重
    guests: 0.15
    investment_value: 0.05
```

**方式2: 结合V1战略洞察**

V1的`design_challenge`字段会识别价值冲突，您可以结合两者：

```
V1输出: "作为[展示品味的需求]与[预算有限的现实]的对立"
  → 如果您更看重"展示品味"，则提高"进口材料"的优先级

V1.5输出: priority_matrix中"进口材料"排名第3
  → 您可以选择保留"进口材料"，削减"智能家居"

结论: V1.5提供数据参考，但最终决策由您根据价值观做出
```

---

### Q5: 方案建议太多，如何选择？

**A**: 查看`recommended: true`的方案（系统推荐），然后对比`trade_offs`。

**决策流程**:

```
Step 1: 筛选系统推荐方案
  recommended: true 的方案通常是最平衡的

Step 2: 对比pros和cons
  看哪个方案的pros最符合您的核心诉求

Step 3: 评估风险承受能力
  - 预算硬约束 → 选"保预算"方案
  - 品质不可妥协 → 选"保品质"方案
  - 灵活性高 → 选"分期实施"方案

Step 4: 咨询专业人士
  V1.5提供数据支撑，但建议结合设计师/项目经理的实际经验
```

---

### Q6: V1.5与V1有什么区别？

**A**: 两者是**互补关系**，不是替代关系。

| 维度 | V1需求分析师 | V1.5可行性分析师 |
|-----|-------------|----------------|
| **核心问题** | 为什么（why） | 能不能（can） |
| **关注焦点** | 人的深层需求 | 资源约束验证 |
| **分析方法** | 定性分析 | 定量分析 |
| **输出形式** | 战略洞察 | 可行性报告 |
| **典型输出** | "作为[身份]的[需求]与[需求]的对立" | "预算缺口14万，建议方案A/B/C" |

**使用建议**:

```
仅使用V1:
  - 项目初期，头脑风暴阶段
  - 需要设计灵感和深度洞察
  - 预算/工期尚未确定

V1 + V1.5双轨并行:
  - 项目规划阶段，需要可行性验证
  - 预算/工期已有初步约束
  - 需要决策支持（保预算还是保品质？）
```

---

## 最佳实践

### 1. 提供明确的约束条件

**❌ 不推荐**:
```
"我想装修，预算灵活"
```

**✅ 推荐**:
```
"我想装修，预算20-25万，希望2个月内完工"
```

**原因**: V1.5需要明确的约束条件才能验证可行性。"预算灵活"会导致V1.5输出"预算未明确，建议确定预算区间"。

---

### 2. 结合V1战略洞察和V1.5可行性验证

**工作流程**:

```
Step 1: 查看V1的战略洞察
  了解自己的深层需求和核心矛盾

Step 2: 查看V1.5的可行性验证
  了解资源约束和优先级排序

Step 3: 综合决策
  结合"我真正想要什么"（V1）和"我能做到什么"（V1.5）
```

**示例**:

```
V1输出: "你的核心需求是'作为科技爱好者的智能便捷需求'"
  → 明确了核心价值：智能便捷

V1.5输出: "智能家居优先级最高（0.21），私人影院较低（0.10）"
  → 数据验证了V1的洞察：智能家居确实是核心

决策: 预算不足时，优先保留智能家居，削减私人影院
  → 既符合深层需求（V1），又符合资源约束（V1.5）
```

---

### 3. 预留预算缓冲

**建议**: 在V1.5估算的基础上，预留**10-15%的预算缓冲**。

**原因**:
- 施工中可能出现变更
- 隐蔽工程可能发现问题
- 市场价格可能波动

**示例**:

```
V1.5估算总成本: 30万
预留缓冲10%: 3万
建议预算: 33万

实际情况:
  - 施工中发现水电老化，需额外改造: +2万
  - 材料价格上涨: +0.5万
  - 设计变更: +0.5万
  总额: 33万（在预算内）

结论: 预留缓冲避免了预算超支
```

---

### 4. 分期实施时注意接口预留

**场景**: 选择"分期实施"方案时。

**注意事项**:

```
一期实施（基础装修）:
  ✅ 必须做：为智能家居预留强弱电接口
  ✅ 必须做：为影院预留音响线路和投影位置
  ✅ 必须做：为新风系统预留管道位置

二期实施（扩展功能）:
  ✅ 成本降低：无需拆改，直接安装设备
  ❌ 如未预留接口：需要开槽布线，成本+30-50%

结论: 分期实施的前提是"一期预留接口"，否则二期改造成本高
```

---

### 5. 定期更新行业标准数据

**提示**: V1.5的估算基于`industry_standards.yaml`中的数据。

**建议更新频率**:
- 成本数据：每年更新（市场价格波动）
- 工期标准：每2年更新（施工工艺进步）
- 空间标准：每5年更新（设计理念变化）

**如何更新**（需要技术支持）:

```yaml
# intelligent_project_analyzer/knowledge_base/industry_standards.yaml

# 更新成本数据
residential_costs:
  smart_home:
    core_system:
      total_cost: [40000, 70000]  # 2025年数据
      # 如果2026年市场价格上涨10%:
      # total_cost: [44000, 77000]

# 添加新技术成本
residential_costs:
  new_energy:  # 新增：新能源系统
    solar_panel: {total_cost_per_kw: [3000, 5000]}
    energy_storage: {total_cost_per_kwh: [2000, 3000]}
```

---

## 附录：完整输出示例

### 示例场景

**用户输入**:
```
"我想装修一个200㎡的别墅，预算20万，要求：
 - 全进口材料
 - 全屋智能家居系统
 - 定制私人影院
 - 2个月完工"
```

### 完整输出

```json
{
  "feasibility_assessment": {
    "overall_feasibility": "low",
    "critical_issues": [
      "预算缺口17万（超预算85%）",
      "工期紧张（标准工期需3个月）"
    ],
    "summary": "项目需求明确但资源约束严重。预算20万无法满足37万的需求成本，且2个月工期对200㎡别墅偏紧。建议采用分期实施方案：一期20万完成基础装修+智能家居，二期15万实现私人影院。"
  },

  "conflict_detection": {
    "budget_conflicts": [
      {
        "type": "预算vs功能冲突",
        "severity": "critical",
        "detected": true,
        "details": {
          "available_budget": 200000,
          "estimated_cost": 370000,
          "gap": 170000,
          "gap_percentage": 85
        },
        "description": "预算20万，但全屋智能（6万）+私人影院（9万）+200㎡装修（22万）典型总成本37万，缺口17万（超预算85%）"
      }
    ],
    "timeline_conflicts": [
      {
        "type": "时间vs质量冲突",
        "severity": "medium",
        "detected": true,
        "details": {
          "available_days": 60,
          "required_days": 90,
          "gap": 30
        },
        "description": "2个月（60天）完成200㎡装修，标准工期需90天，存在30天缺口"
      }
    ],
    "space_conflicts": []
  },

  "priority_matrix": [
    {
      "requirement": "全屋智能家居系统",
      "priority_score": 0.216,
      "breakdown": {
        "stakeholder_weight": 0.40,
        "necessity_level": 0.60,
        "time_sensitivity": 0.90
      },
      "rank": 1,
      "estimated_cost": 60000,
      "rationale": "业主+家庭成员共同需求，属于舒适需求，工期紧张（urgent）"
    },
    {
      "requirement": "200㎡中档装修",
      "priority_score": 0.180,
      "breakdown": {
        "stakeholder_weight": 0.40,
        "necessity_level": 0.60,
        "time_sensitivity": 0.75
      },
      "rank": 2,
      "estimated_cost": 300000,
      "rationale": "基础装修属于舒适需求，重要但不紧急"
    },
    {
      "requirement": "私人影院",
      "priority_score": 0.080,
      "breakdown": {
        "stakeholder_weight": 0.40,
        "necessity_level": 0.40,
        "time_sensitivity": 0.50
      },
      "rank": 3,
      "estimated_cost": 90000,
      "rationale": "业主个人需求，属于自我实现需求，时间敏感性一般"
    }
  ],

  "recommendations": [
    {
      "name": "方案A: 分期实施（推荐）",
      "strategy": "一期满足核心需求，二期扩展",
      "adjustments": [
        "一期（20万）: 基础装修（1000元/㎡×200㎡=20万，标准档次）",
        "一期（预留接口）: 为智能家居和影院预留强弱电接口",
        "二期（15万）: 全屋智能（6万）+ 标准影院（9万）"
      ],
      "adjusted_cost": {
        "phase1": 200000,
        "phase2": 150000,
        "total": 350000,
        "gap_from_budget_phase1": 0
      },
      "timeline": {
        "phase1": "60天（赶工但可接受）",
        "phase2": "15-20天（仅智能家居和影院安装）"
      },
      "trade_offs": {
        "pros": [
          "一期预算达标",
          "分散资金压力",
          "可先入住体验后优化"
        ],
        "cons": [
          "二期施工影响居住",
          "二期总成本可能增加10-15%（重新进场）"
        ]
      },
      "recommended": true
    },
    {
      "name": "方案B: 功能优先级削减",
      "strategy": "保留最高优先级，削减次要需求",
      "adjustments": [
        "保留: 全屋智能（6万）",
        "保留: 基础装修（800元/㎡×200㎡=16万）",
        "削减: 私人影院 → 简易观影区（电视墙，-9万）"
      ],
      "adjusted_cost": {
        "total": 220000,
        "gap_from_budget": 20000,
        "reduction_items": ["私人影院(-9万)"]
      },
      "timeline": {
        "total_days": 70,
        "feasibility": "可行（延后10天）"
      },
      "trade_offs": {
        "pros": [
          "接近预算（超支10%）",
          "核心功能保留",
          "工期可控"
        ],
        "cons": [
          "无专业影院体验",
          "装修档次下降",
          "长期满意度可能降低"
        ]
      },
      "recommended": false
    },
    {
      "name": "方案C: 增加预算",
      "strategy": "保留所有需求，调整预算至37万",
      "adjustments": [
        "追加预算: 17万（从20万提升至37万）",
        "保留所有原始需求"
      ],
      "adjusted_cost": {
        "total": 370000,
        "gap_from_budget": 170000,
        "increase_percentage": 85
      },
      "timeline": {
        "total_days": 90,
        "extension_needed": 30
      },
      "trade_offs": {
        "pros": [
          "品质完全达标",
          "功能完整实现",
          "长期投资回报高"
        ],
        "cons": [
          "预算超支85%",
          "资金压力大",
          "工期延长50%"
        ]
      },
      "recommended": false,
      "note": "如家庭财务充裕，此方案长期体验最佳"
    }
  ],

  "risk_flags": [
    {
      "type": "预算风险",
      "severity": "critical",
      "description": "当前预算与需求成本差距达17万（85%），属于严重资源不匹配",
      "mitigation": "建议选择方案A（分期）或方案B（削减），避免超预算导致项目烂尾"
    },
    {
      "type": "工期风险",
      "severity": "medium",
      "description": "2个月工期对200㎡别墅偏紧，赶工可能影响质量",
      "mitigation": "如选择方案A一期，60天可完成基础装修（不含智能家居）；或延长至75-80天"
    }
  ],

  "suggested_action": "强烈推荐方案A（分期实施）。先用20万完成基础装修，预留智能接口，入住后根据实际体验和资金情况决定二期投入。这样既解决了预算约束，又保留了未来扩展空间。"
}
```

---

**版本历史**:
- v1.0 (2025-12-06): 初始版本

**相关文档**:
- `V15_FEASIBILITY_ANALYST_ARCHITECTURE.md` - V1.5架构设计文档
- `intelligent_project_analyzer/config/prompts/feasibility_analyst.yaml` - V1.5配置文件
- `intelligent_project_analyzer/knowledge_base/industry_standards.yaml` - 行业标准知识库
