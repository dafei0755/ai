# 战略校准问卷密度增强 (2025-11-25)

## 🎯 优化目标

**用户反馈**: "这里的问题，只有3个，密度和颗粒度不够啊"

**核心问题**: 原版问卷题目过少，无法深度挖掘用户需求的多个维度

---

## ✅ 已完成的优化

### 1. **Lite版配置** (`requirements_analyst_lite.yaml`)

#### 修改前 (3个问题)
- 1个单选题: 上镜vs舒适
- 1个多选题: 独处时感官体验
- ❌ 缺少: 资源分配/工作模式/时间维度/精神场景

#### 修改后 (7个问题)
```yaml
# 单选题 (2个) - 价值排序
Q1. 当'上镜的背景'与'生活的舒适'冲突时，您的天平倾向哪边？
Q2. 您期望空间的'表演性'占比多少？

# 多选题 (3个) - 细节补充
Q3. 面对预算压力，哪些是您'不妥协'的底线？(最多选3项)
    - 光线质量/材质品质/收纳系统/智能系统/空间高度/声学隔音
Q4. 在独处时，哪些感官体验对构建'内心秩序'最重要？
    - 赤脚触感/自然光影/音乐/香氛/安静
Q5. 工作高峰期(拍摄/直播/剪辑)，您希望空间如何响应？
    - 快速转换/固定分区/整合模式

# 开放题 (2个) - 场景捕捉
Q6. 您理想中的'清晨仪式'是在怎样的空间中进行？
Q7. 描述一个您最向往的'独处场景'(时间/地点/正在做什么/周围有什么)
```

**覆盖维度**: 价值排序 + 资源分配 + 工作模式 + 感官偏好 + 时间维度 + 精神场景

---

### 2. **完整版配置** (`requirements_analyst.yaml`)

#### 修改前 (9个问题)
- 3个单选题: 上镜vs舒适、身份宣言、未来角色
- 3个多选题: 独处感官、效率杀手、隐藏任务
- 3个开放题: 设计案例、典型一天、5年后

#### 修改后 (10个问题)
```yaml
# 单选题 (4个)
Q1. 当'上镜的背景'与'生活的舒适'冲突时...
Q2. 关于您的新身份，您希望这次的设计在多大程度上成为一次'宣言'？
Q3. 您希望空间在未来五年扮演怎样的角色？
Q7. 工作高峰期(拍摄/直播/剪辑)，您希望空间如何响应？ ← 新增

# 多选题 (4个)
Q4. 面对预算压力，以下哪些是您'不妥协'的底线？ ← 新增
Q5. 在您的独处时间里，哪种感官体验...
Q6. 在创作内容时，哪些是绝对不能容忍的'效率杀手'？
Q8. 除了居住和创作，这个空间还需要悄悄地为您完成哪些'隐藏任务'？

# 开放题 (2个) - 重新聚焦
Q9. 您理想中的'清晨仪式'是在怎样的空间中进行？ ← 替换原"设计案例"
Q10. 描述一个您最向往的'独处场景'... ← 替换原"典型一天/5年后"
```

**关键改进**:
- ✅ 新增"资源分配优先级"问题（预算不妥协底线）
- ✅ 新增"工作模式"问题（高峰期空间响应）
- ✅ 开放题从宽泛的"案例/一天/未来"改为具体的"清晨仪式/独处场景"

---

### 3. **System Prompt强化**

#### 协议B - 信息补全优化

**修改前**:
```yaml
- 生成战略问卷高效收集情报
- 单选题暴露价值排序，多选题补充细节
```

**修改后**:
```yaml
- 🎯 问题数量: 生成7-10个高密度问题
- 🎯 题型顺序: 严格按照"单选题 → 多选题 → 开放题"组织
- 问题覆盖维度示例:
  * 价值排序: "当A与B冲突时，您如何选择？"
  * 资源分配: "面对预算压力，哪些是不妥协底线？"
  * 生活节奏: "工作高峰期/独处时，空间如何响应？"
  * 感官偏好: "哪些感官体验最重要？(视/听/触/嗅/温度)"
  * 社交边界: "独处/小聚/工作的空间分离度？"
  * 时间维度: "描述理想的清晨仪式/夜晚场景"
  * 精神诉求: "描述最向往的独处场景(开放题)"
```

---

## 📊 优化效果对比

| 维度 | 优化前 | 优化后 | 改进 |
|------|--------|--------|------|
| **问题数量** | Lite 3个 / Full 9个 | Lite 7个 / Full 10个 | +133% / +11% |
| **覆盖维度** | 2个 (价值/感官) | 7个 (价值/资源/工作/感官/社交/时间/精神) | +250% |
| **题型结构** | 不明确 | 严格顺序 (单选→多选→开放) | ✅ 结构化 |
| **资源分配** | ❌ 无 | ✅ 预算优先级问题 | 新增 |
| **工作模式** | ❌ 无 | ✅ 高峰期响应问题 | 新增 |
| **场景捕捉** | ⚠️ 宽泛 | ✅ 具体仪式场景 | 精准化 |

---

## 🎯 7大覆盖维度详解

### 1. **价值排序** (单选题)
- 目的: 暴露优先级权衡
- 示例: "当A与B冲突时，您如何选择？"
- 触发: L3核心张力识别

### 2. **资源分配** (多选题)
- 目的: 决定设计投入策略
- 示例: "面对预算压力，哪些是不妥协底线？"
- 触发: L1分解 + L4 JTBD

### 3. **工作模式** (单选题)
- 目的: 理解高峰期/低谷期需求
- 示例: "工作高峰期，空间如何响应？"
- 触发: L2建模 + V5场景设计

### 4. **感官偏好** (多选题)
- 目的: 确定材质/光线/声音侧重
- 示例: "哪些感官体验最重要？"
- 触发: L2建模 + V6工程实施

### 5. **社交边界** (单选/多选)
- 目的: 理解独处/小聚/工作的空间分离度
- 示例: "空间表演性占比？"
- 触发: L3核心张力 + V3叙事设计

### 6. **时间维度** (开放题)
- 目的: 捕捉晨/昼/夜的理想场景
- 示例: "理想的清晨仪式？"
- 触发: L5锐度测试 + V5场景设计

### 7. **精神诉求** (开放题)
- 目的: 具体仪式/独处场景描述
- 示例: "最向往的独处场景？"
- 触发: L4 JTBD + V3叙事设计

---

## ✅ 成功标准

- ✅ 问题数量: 7-10个（Lite 7个，Full 10个）
- ✅ 题型顺序: 单选 → 多选 → 开放（降低认知负担）
- ✅ 覆盖维度: 7大维度全覆盖
- ✅ 情报目标: 每个问题明确服务于L1-L5的哪个环节
- ✅ 避免无效: 不问"喜欢什么风格"，改问"冲突时如何选择"
- ✅ 场景化: 开放题聚焦具体仪式和场景描述

---

## 📁 修改文件清单

| 文件 | 修改内容 | 状态 |
|------|---------|------|
| `requirements_analyst_lite.yaml` | 问卷示例: 3个 → 7个 | ✅ 完成 |
| `requirements_analyst_lite.yaml` | 协议B: 增加7大维度说明 | ✅ 完成 |
| `requirements_analyst.yaml` | 协议B: 增加7大维度说明 | ✅ 完成 |
| `requirements_analyst.yaml` | 问卷示例: 9个 → 10个 | ⚠️ 部分完成 (资源分配题已添加，工作模式题需手动添加) |

---

## 🔄 后续建议

### 手动修改步骤
由于YAML缩进匹配问题，请手动完成以下步骤：

1. 打开 `intelligent_project_analyzer/config/prompts/requirements_analyst.yaml`
2. 定位到第417-420行（"电源或网络接口的缺失"之后）
3. 在"除了居住和创作..."问题之前插入以下内容：

```yaml
      
      - question: "工作高峰期(拍摄/直播/剪辑)，您希望空间如何响应？"
        context: "理解您的工作模式，决定动线设计与功能区布局策略。"
        type: "single_choice"
        options:
          - "快速转换(5分钟内完成场景切换)"
          - "固定分区(工作区永久ready,不打扰生活区)"
          - "整合模式(生活即内容,无需刻意转换)"
```

---

## 📊 预期用户体验

### 问卷填写流程
1. **开始 (2个单选题)** - 快速选择，2分钟
   - 上镜vs舒适？表演性占比？
2. **深入 (3-4个多选题)** - 多选补充，3-5分钟
   - 预算底线？感官偏好？工作模式？效率杀手？
3. **沉浸 (2个开放题)** - 描述场景，5-8分钟
   - 清晨仪式？独处场景？

**总时长**: 10-15分钟（vs 原3题的3-5分钟）

**价值提升**: 从"表面偏好收集"升级为"深度需求挖掘"

---

## 相关文档

- Lite版配置: `config/prompts/requirements_analyst_lite.yaml`
- 完整版配置: `config/prompts/requirements_analyst.yaml`
- 问卷节点: `interaction/nodes/calibration_questionnaire.py`
- 需求分析师: `agents/requirements_analyst.py`
