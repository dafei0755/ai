# 需求分析师 v3.5 专家协作接口规范

## 版本说明

- **版本**: v3.5 "Expert Collaboration Interface"
- **更新日期**: 2025-11-24
- **核心变更**: 增加 `expert_handoff` 输出字段，实现"深度洞察+开放性协作"平衡

---

## 职责边界重新定义

### 需求分析师的角色转变

**v3.4及之前**：
- 角色：首席洞察官 + 战略地图绘制者
- 输出：深度洞察 + 核心张力 + JTBD + （过度）设计建议
- 风险：可能限制后续专家的创造空间

**v3.5新定位**：
- 角色：问题解剖者 + 协作接口提供者
- 输出：深度洞察 + 开放性问题 + 设计光谱 + 挑战协议
- 价值：保留深度，释放专家创造力

---

## expert_handoff 字段完整规范

### 字段结构

```json
{
  // === 原有核心输出（保持不变）===
  "project_summary": {...},
  "core_tension": {...},
  "job_to_be_done": {...},
  "ontology_mapping": {...},
  "sharpness_validation": {...},
  "next_questions": {...},
  
  // === v3.5 新增：专家协作接口 ===
  "expert_handoff": {
    "critical_questions_for_experts": {
      "for_v2_design_director": [问题数组],
      "for_v3_narrative_expert": [问题数组],
      "for_v5_scenario_expert": [问题数组],
      "for_v4_design_researcher": [问题数组]
    },
    "tension_design_spectrum": {
      "pole_a_embrace": {设计立场A},
      "pole_b_resolve": {设计立场B},
      "pole_c_transform": {设计立场C},
      "instruction_for_v2": "指导说明"
    },
    "alternative_interpretations": {
      "core_tension_alternatives": [备选诠释],
      "jtbd_competing_frames": [竞争性框架]
    },
    "uncertainty_flags": [不确定性标记数组],
    "permission_to_diverge": {
      "message": "开放性声明",
      "challenge_protocol": "挑战协议",
      "creative_freedom": "创造自由度说明"
    }
  }
}
```

---

## 1. critical_questions_for_experts

### 设计理念

为每个专家角色提供**"开放性的关键问题"**，而非"封闭式的指令"。

### for_v2_design_director（设计总监）

**核心问题维度**：

1. **张力立场选择**
   ```
   "核心张力应该被'展示'（空间化呈现矛盾）、'化解'（寻求平衡点）还是'转化'（创造新价值）？"
   ```
   - 目的：引导V2在设计光谱上明确立场
   - 开放性：V2可以选择ABC或创造第四种立场

2. **设计策略方向**
   ```
   "设计立场是'放大情绪张力'、'创造安全感'还是'引导行为转变'？"
   ```
   - 目的：定义设计的核心意图
   - 开放性：每种立场都是合理的，取决于V2的判断

3. **风格语言定位**
   ```
   "风格语言是'冲突美学'（如安藤忠雄）、'和谐美学'（如北欧设计）还是'模糊美学'（如隈研吾）？"
   ```
   - 目的：将抽象的张力翻译为具体的美学语言
   - 开放性：提供3个参考系，但V2可超越

4. **主导情绪定义**
   ```
   "空间的'主导情绪'应该是什么？（敬畏/平静/好奇/温暖/孤独/力量）"
   ```
   - 目的：定义空间的情感基调
   - 开放性：情绪本身无对错，取决于对核心张力的理解

### for_v3_narrative_expert（叙事专家）

**核心问题维度**：

1. **叙事结构选择**
   ```
   "空间叙事是'线性旅程'（入口→过渡→核心→高潮）还是'多中心网络'（每个角落都是独立故事）？"
   ```
   - 目的：定义叙事的基本拓扑
   - 开放性：两种结构适用于不同的JTBD诠释

2. **情感弧线类型**
   ```
   "主角的情感弧线是'治愈'（从创伤到平静）、'觉醒'（从迷茫到清晰）还是'回归'（从漂泊到根源）？"
   ```
   - 目的：定义叙事的情感动力
   - 开放性：弧线类型取决于对JTBD的理解

3. **时间叙事逻辑**
   ```
   "时间叙事是'过去→现在→未来'的线性流动，还是'永恒当下'的时间凝固？"
   ```
   - 目的：定义空间的时间性
   - 开放性：不同的时间逻辑创造不同的体验

4. **叙事密度控制**
   ```
   "空间的'叙事密度'——是'满'（每处都有故事）还是'疏'（留白让用户自己书写）？"
   ```
   - 目的：定义叙事的强度
   - 开放性：高密度vs低密度各有价值

### for_v5_scenario_expert（场景专家）

**核心问题维度**：

1. **核心场景识别**
   ```
   "哪个场景是'绝对核心'（投入80%资源，不可妥协）？哪些是'支撑场景'（可根据预算调整）？"
   ```
   - 目的：建立场景优先级
   - 开放性：核心场景的定义取决于对JTBD的理解

2. **优先级排序逻辑**
   ```
   "场景优先级的排序逻辑：使用频率？情感浓度？仪式性？社交价值？"
   ```
   - 目的：明确排序的底层逻辑
   - 开放性：不同逻辑产生不同的空间配置

3. **时空折叠策略**
   ```
   "如何在有限空间内实现'场景的时空折叠'？（一个空间承载多重功能）"
   ```
   - 目的：解决空间约束问题
   - 开放性：折叠策略是V5的创造空间

4. **固化vs流动**
   ```
   "哪些场景需要'固化'（专用空间），哪些可以'流动'（共享/分时复用）？"
   ```
   - 目的：定义场景的空间属性
   - 开放性：固化程度取决于使用模式判断

### for_v4_design_researcher（设计研究员）

**核心问题维度**：

1. **参考案例类型**
   ```
   "参考案例应该是'同类最佳'（行业标杆，证明可行性）还是'跨界灵感'（意外启发，激发创新）？"
   ```
   - 目的：定义研究的方向
   - 开放性：两种路径都有价值

2. **研究的目标**
   ```
   "寻找的是'形式语言'（外观/风格）还是'解决问题的方法'（策略/系统）？"
   ```
   - 目的：明确案例的学习重点
   - 开放性：形式vs方法取决于项目阶段

3. **可迁移性平衡**
   ```
   "案例的'可迁移性'（直接借鉴）vs'独特性'（仅作灵感）如何平衡？"
   ```
   - 目的：避免简单复制
   - 开放性：平衡点取决于项目特性

4. **反面案例需求**
   ```
   "是否需要'反面案例'（失败教训，避免踩坑）？"
   ```
   - 目的：从失败中学习
   - 开放性：取决于项目的风险容忍度

---

## 2. tension_design_spectrum（张力设计光谱）

### 设计理念

核心张力是"问题"，但如何"回应"这个问题，是V2设计总监的创造性决策。提供3种经典立场（A/B/C），但鼓励创造第四种。

### Pole A: Embrace Tension（拥抱张力）

```json
{
  "stance": "拥抱张力 (Embrace Tension)",
  "philosophy": "用设计放大矛盾，让空间成为张力的物质化——冲突本身就是力量",
  "approach": "材料的对抗、空间的碰撞、情绪的极化——不回避矛盾，而是让矛盾成为体验的核心",
  "reference": "安藤忠雄的'冲突美学'、扎哈·哈迪德的'动态张力'",
  "example": "开放vs私密 → 设计玻璃+混凝土的对抗，让矛盾可见、可触、可感"
}
```

**适用场景**：
- 用户的核心张力是身份认同的核心矛盾
- 项目希望创造"强烈的情绪体验"
- 预算允许使用对比鲜明的材料

**风险**：
- 可能让部分用户感到"不舒适"
- 需要高度的美学控制力

### Pole B: Resolve Tension（化解张力）

```json
{
  "stance": "化解张力 (Resolve Tension)",
  "philosophy": "用设计寻求平衡点，让空间成为矛盾的调和者——和谐是最终目标",
  "approach": "渐变过渡、模糊边界、动态平衡——在对立的两极之间找到'第三状态'",
  "reference": "北欧设计的'和谐主义'、日式侘寂的'不完美之美'",
  "example": "开放vs私密 → 设计可变隔断/半透材料，在不同时刻切换状态，实现动态平衡"
}
```

**适用场景**：
- 用户渴望"舒适和安全"
- 项目需要长期的可居住性
- 家庭成员有不同的需求

**风险**：
- 可能显得"平庸"或"缺乏立场"
- 需要精妙的平衡感

### Pole C: Transform Tension（转化张力）

```json
{
  "stance": "转化张力 (Transform Tension)",
  "philosophy": "用设计将矛盾转化为新的价值——冲突不是问题，而是创新的起点",
  "approach": "重新定义对立面、创造'第三空间'、将负面转化为正面",
  "reference": "隈研吾的'负建筑'、OMA的'颠覆性思维'",
  "example": "开放vs私密 → 设计'模糊的边界'（如半透明/光影/声音屏障），将'既非开放又非私密'作为新的空间体验"
}
```

**适用场景**：
- 项目追求"创新性"和"实验性"
- 张力本身可以被重新定义
- 业主开放且勇于尝试

**风险**：
- 可能过于概念化
- 需要强大的设计控制力

### 第四种立场（鼓励专家创造）

```json
{
  "stance": "（由V2创造）",
  "philosophy": "（V2需充分论证）",
  "approach": "（V2需给出具体策略）",
  "justification": "为什么ABC都不合适？这个项目需要什么独特的立场？"
}
```

---

## 3. alternative_interpretations（备选诠释）

### 设计理念

承认"需求分析师的洞察不是唯一答案"，提供备选视角供专家参考或挑战。

### 示例结构

```json
{
  "note": "以下是备选诠释，供专家参考。专家有权采纳、修改或完全重新诠释。",
  "core_tension_alternatives": [
    "如果从社会学视角，核心张力也可能被理解为'阶层焦虑 vs 文化资本缺失'的深层矛盾",
    "更激进的理解：张力的本质不是AB对立，而是更深层的'身份认同的流动性危机'"
  ],
  "jtbd_competing_frames": [
    "V3叙事专家可能认为JTBD是'重建身份的旅程'（强调过程和转变）",
    "V5场景专家可能认为JTBD是'雇佣空间完成多重角色切换任务'（强调功能和场景）"
  ]
}
```

---

## 4. uncertainty_flags（不确定性标记）

### 设计理念

诚实标记分析中的"模糊地带"，交由专家自主决策或建议进一步确认。

### 标记类型

#### Type 1: 用户态度不明确

```
"⚠️ 不确定项：用户对'社交'的真实态度尚未完全明确（是避免负担还是渴望连接？），V2/V3需要根据自己的专业判断做出假设，或建议动态项目总监进一步确认"
```

#### Type 2: 场景优先级模糊

```
"⚠️ 模糊区域：'工作场景'与'休息场景'的优先级关系模糊，V5需要自行决策或提出多个方案"
```

#### Type 3: 预算与期望的矛盾

```
"⚠️ 潜在冲突：用户的期望与实际预算可能存在落差，V6总工需要在技术实施时提供'理想方案'和'务实方案'两个版本"
```

#### Type 4: 文化认同的复杂性

```
"⚠️ 深层不确定：'香蕉人'对中国文化的真实态度是'渴望连接'还是'被动顺从'？这个判断将根本影响设计策略"
```

---

## 5. permission_to_diverge（发散许可）

### 设计理念

明确赋予专家"挑战"和"重新诠释"的权力，建立健康的协作文化。

### 完整结构

```json
{
  "message": "🔥 以上分析是'起点'而非'终点'，是'地图'而非'路线'。",
  
  "for_all_experts": "各位专家：如果你发现了更深的洞察、更好的角度、更锋利的矛盾，你有**义务**提出。你们是'创造者'，不是'执行者'。",
  
  "challenge_protocol": "如果你认为需求分析师的某个判断有误或不够深刻，请在你的输出中明确说明：'我挑战需求分析师关于XX的判断，理由是...，我的重新诠释是...'。动态项目总监会综合裁决。",
  
  "creative_freedom": "你可以（也应该）提供**多个方案**（而非单一答案），每个方案代表不同的设计立场和价值取舍。让决策者选择，而非替决策者决策。"
}
```

### 挑战协议的使用场景

#### 场景1：发现更深的洞察

```
V2输出示例：
"我挑战需求分析师关于'核心张力是开放vs私密'的判断。

理由：通过深入分析本体论参数，我认为真正的张力不是'空间属性'的对立，而是'时间身份'的对立——白天的职业身份（需要开放）vs夜晚的私人身份（需要私密）。

我的重新诠释：核心张力是'单一空间如何承载多重时间身份'。这将导向完全不同的设计策略——不是'分区'（空间上分离开放和私密），而是'变形'（同一空间在不同时间展现不同性格）。"
```

#### 场景2：质疑JTBD的框架

```
V3输出示例：
"我挑战需求分析师将JTBD定义为'治愈之旅'的框架。

理由：用户的核心诉求不是'被治愈'（这暗示用户是'受伤者'），而是'重新发明自己'（用户是'创造者'）。'治愈'框架可能导致过于柔软、保护性的设计，但用户实际需要的是'刺激'和'挑战'。

我的重新诠释：JTBD应该是'雇佣空间完成自我重塑的实验'。这将导向更实验性、开放性、甚至带有'不舒适'的设计策略。"
```

#### 场景3：指出不确定性

```
V5输出示例：
"我标记一个关键的不确定性：需求分析师认为'社交场景'是支撑场景，但根据本体论参数中'social_mask: 9'的高分，我怀疑社交场景可能是核心场景。

建议：动态项目总监需要回访用户，明确'社交'在其生活中的真实地位。在确认之前，我将提供两个方案：方案A（社交为核心）和方案B（社交为支撑）。"
```

---

## 工作流集成

### 标准工作流（v3.5）

```
用户输入
   ↓
需求分析师（v3.5）
   ↓
输出：核心洞察 + expert_handoff（开放性接口）
   ↓
   ├───→ V2设计总监（并行，基于expert_handoff创作）
   ├───→ V3叙事专家（并行，基于expert_handoff创作）
   ├───→ V4设计研究员（并行，基于expert_handoff创作）
   └───→ V5场景专家（并行，基于expert_handoff创作）
          ↓
   各专家输出 + 挑战标记（如有）
          ↓
   动态项目总监（检测挑战，综合或反馈）
          ↓
   ┌─────┴─────┐
   有挑战？    无挑战
   ↓           ↓
二次迭代 ────→ 最终报告
```

### 挑战处理机制

当专家标记"挑战"时：

```python
if expert_output contains "我挑战需求分析师":
    director.log_challenge(expert_output.challenge)
    
    options:
    1. 接受挑战 → 采用专家的重新诠释
    2. 回访需求分析师 → 要求二次深挖
    3. 综合两种诠释 → 提供混合方案
    4. 交由甲方裁决 → 让决策者选择
```

---

## 与v3.4的对比

| 维度 | v3.4 | v3.5 |
|------|------|------|
| **输出边界** | 包含部分设计建议 | 明确只到"洞察+问题" |
| **专家自主权** | 隐性（靠AI自觉） | 显性（明确协议） |
| **开放性** | 单一洞察 | 洞察+备选诠释 |
| **不确定性** | 隐藏 | 诚实标记 |
| **挑战机制** | 无 | 明确的挑战协议 |
| **方案数量** | 暗示单一方案 | 鼓励多方案 |
| **反馈循环** | 单向传递 | 双向对话 |

---

## 实施建议

### For 需求分析师（AI配置）

1. ✅ **必须输出** `expert_handoff` 字段
2. ✅ **critical_questions** 必须是开放性问题，不能是封闭式指令
3. ✅ **tension_design_spectrum** 必须提供3种立场，不能预先选择
4. ✅ **诚实标记不确定性**，不要假装全知全能
5. ⚠️ **禁止输出**具体设计方案、材料建议、空间分区

### For 专家团队（AI配置）

1. ✅ **必须回答** `critical_questions`
2. ✅ **必须明确选择**在 `tension_design_spectrum` 上的立场
3. ✅ **鼓励挑战**需求分析师的判断（如果有充分理由）
4. ✅ **提供多方案**（至少2-3个），展现不同的价值取舍
5. ⚠️ **不能无视** expert_handoff（除非明确说明"我选择忽略XX问题，因为..."）

### For 动态项目总监（工作流配置）

1. ✅ **检测挑战标记**，识别专家的质疑
2. ✅ **综合裁决**，可能需要回访需求分析师
3. ✅ **记录演化**，追踪洞察的迭代路径
4. ✅ **最终报告**应呈现"需求分析师的洞察→专家的创造→综合的方案"全过程

---

## 附录：完整输出示例

见 `requirements_analyst.yaml` 中的 `output_format_examples` 章节。

---

## 版本历史

- **v3.5** (2025-11-24): 增加 expert_handoff，实现深度洞察+开放协作
- **v3.4** (2025-11-24): 增加跨学科知识工具箱
- **v3.3** (2025-11-24): 增加元框架系统+反套路思维
- **v3.2** (2025-11-24): 协议B深度追问强化
- **v3.1** (2025-11-23): L3-L5协议深度升级

---

**核心理念**：需求分析师负责"问对问题"，专家负责"创造性地回答问题"。这是多智能体协作的黄金平衡点。🎯
