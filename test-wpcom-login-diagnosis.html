<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WPCOMç™»å½•è‡ªåŠ¨è¯Šæ–­å·¥å…· v1.0</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }

    .header p {
      opacity: 0.9;
      font-size: 14px;
    }

    .content {
      padding: 30px;
    }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 12px;
      border-left: 4px solid #667eea;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: #667eea;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }

    .status-pending {
      background: #fef3c7;
      color: #92400e;
    }

    .status-running {
      background: #dbeafe;
      color: #1e40af;
      animation: pulse 2s infinite;
    }

    .status-success {
      background: #d1fae5;
      color: #065f46;
    }

    .status-error {
      background: #fee2e2;
      color: #991b1b;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
    }

    .result-box {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
      max-height: 400px;
      overflow-y: auto;
    }

    .result-box pre {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .log-entry {
      padding: 8px 12px;
      margin: 5px 0;
      border-radius: 6px;
      font-size: 13px;
    }

    .log-info {
      background: #eff6ff;
      border-left: 3px solid #3b82f6;
    }

    .log-success {
      background: #f0fdf4;
      border-left: 3px solid #10b981;
    }

    .log-error {
      background: #fef2f2;
      border-left: 3px solid #ef4444;
    }

    .log-warning {
      background: #fffbeb;
      border-left: 3px solid #f59e0b;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: #e5e7eb;
      border-radius: 3px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      transition: width 0.3s ease;
    }

    .endpoint-item {
      background: white;
      padding: 12px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #e5e7eb;
    }

    .endpoint-path {
      font-family: 'Courier New', monospace;
      font-weight: 600;
      color: #667eea;
      margin-bottom: 5px;
    }

    .endpoint-methods {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .method-badge {
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
    }

    .method-get {
      background: #dbeafe;
      color: #1e40af;
    }

    .method-post {
      background: #d1fae5;
      color: #065f46;
    }

    .method-delete {
      background: #fee2e2;
      color: #991b1b;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .summary-card {
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      text-align: center;
    }

    .summary-value {
      font-size: 32px;
      font-weight: 700;
      color: #667eea;
      margin: 5px 0;
    }

    .summary-label {
      font-size: 13px;
      color: #6b7280;
    }

    .copy-button {
      background: #6b7280;
      padding: 6px 12px;
      font-size: 12px;
      margin-top: 10px;
    }

    .copy-button:hover {
      background: #4b5563;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ” WPCOMç™»å½•è‡ªåŠ¨è¯Šæ–­å·¥å…·</h1>
      <p>è‡ªåŠ¨æ£€æµ‹WordPress REST APIç«¯ç‚¹ã€WPCOM Member Proé…ç½®å’Œç™»å½•æ¥å£çŠ¶æ€</p>
    </div>

    <div class="content">
      <!-- æ§åˆ¶é¢æ¿ -->
      <div class="section">
        <div class="section-title">
          <span>âš¡</span>
          <span>å¿«é€Ÿè¯Šæ–­</span>
        </div>
        <button id="startDiagnosis" onclick="startFullDiagnosis()">
          ğŸš€ å¼€å§‹å®Œæ•´è¯Šæ–­ï¼ˆå…¨è‡ªåŠ¨ï¼‰
        </button>
        <button onclick="copyAllResults()" style="margin-left: 10px; background: #059669;">
          ğŸ“‹ å¤åˆ¶æ‰€æœ‰ç»“æœ
        </button>
        <div class="progress-bar" id="progressBar" style="display: none;">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <!-- æ­¥éª¤1: REST APIç´¢å¼• -->
      <div class="section">
        <div class="section-title">
          <span>ğŸ“¡</span>
          <span>æ­¥éª¤1: WordPress REST APIç«¯ç‚¹æ£€æµ‹</span>
          <span class="status-badge status-pending" id="status1">å¾…æ‰§è¡Œ</span>
        </div>
        <p style="color: #6b7280; font-size: 14px; margin-bottom: 10px;">
          è‡ªåŠ¨æ‰«æ WordPress REST APIï¼ŒæŸ¥æ‰¾ WPCOM Member Pro ç›¸å…³çš„ç™»å½•ç«¯ç‚¹
        </p>
        <button onclick="checkRestApiEndpoints()">ğŸ” æ£€æµ‹REST APIç«¯ç‚¹</button>
        <div id="result1" class="result-box" style="display: none;"></div>
      </div>

      <!-- æ­¥éª¤2: æµ‹è¯•WPCOMç™»å½•API -->
      <div class="section">
        <div class="section-title">
          <span>ğŸ”</span>
          <span>æ­¥éª¤2: WPCOMç™»å½•APIæµ‹è¯•</span>
          <span class="status-badge status-pending" id="status2">å¾…æ‰§è¡Œ</span>
        </div>
        <p style="color: #6b7280; font-size: 14px; margin-bottom: 10px;">
          æ¨¡æ‹Ÿç™»å½•è¯·æ±‚ï¼Œæ•è·è¯¦ç»†çš„è¯·æ±‚/å“åº”ä¿¡æ¯
        </p>
        <button onclick="testWpcomLoginApi()">ğŸ§ª æµ‹è¯•ç™»å½•API</button>
        <div id="result2" class="result-box" style="display: none;"></div>
      </div>

      <!-- æ­¥éª¤3: Cookieå’Œè®¤è¯çŠ¶æ€æ£€æµ‹ -->
      <div class="section">
        <div class="section-title">
          <span>ğŸª</span>
          <span>æ­¥éª¤3: Cookieå’Œè®¤è¯çŠ¶æ€</span>
          <span class="status-badge status-pending" id="status3">å¾…æ‰§è¡Œ</span>
        </div>
        <p style="color: #6b7280; font-size: 14px; margin-bottom: 10px;">
          æ£€æŸ¥å½“å‰æµè§ˆå™¨çš„ WordPress å’Œ WPCOM ç›¸å…³ Cookie
        </p>
        <button onclick="checkCookiesAndAuth()">ğŸ” æ£€æŸ¥è®¤è¯çŠ¶æ€</button>
        <div id="result3" class="result-box" style="display: none;"></div>
      </div>

      <!-- æ­¥éª¤4: ç½‘ç»œè¯·æ±‚ç›‘æ§ -->
      <div class="section">
        <div class="section-title">
          <span>ğŸ“Š</span>
          <span>æ­¥éª¤4: å®æ—¶ç½‘ç»œè¯·æ±‚ç›‘æ§</span>
          <span class="status-badge status-pending" id="status4">å¾…æ‰§è¡Œ</span>
        </div>
        <p style="color: #6b7280; font-size: 14px; margin-bottom: 10px;">
          æ‰“å¼€ /login é¡µé¢å¹¶ç›‘æ§æ‰€æœ‰ç½‘ç»œè¯·æ±‚
        </p>
        <button onclick="monitorLoginPage()">ğŸŒ ç›‘æ§ç™»å½•é¡µé¢</button>
        <div id="result4" class="result-box" style="display: none;"></div>
      </div>

      <!-- è¯Šæ–­æ‘˜è¦ -->
      <div class="section">
        <div class="section-title">
          <span>ğŸ“‹</span>
          <span>è¯Šæ–­æ‘˜è¦</span>
        </div>
        <div class="summary-grid" id="summary">
          <div class="summary-card">
            <div class="summary-label">æ£€æµ‹åˆ°çš„ç«¯ç‚¹</div>
            <div class="summary-value" id="summaryEndpoints">-</div>
          </div>
          <div class="summary-card">
            <div class="summary-label">WPCOMç›¸å…³ç«¯ç‚¹</div>
            <div class="summary-value" id="summaryWpcom">-</div>
          </div>
          <div class="summary-card">
            <div class="summary-label">Cookieæ•°é‡</div>
            <div class="summary-value" id="summaryCookies">-</div>
          </div>
          <div class="summary-card">
            <div class="summary-label">è¯Šæ–­çŠ¶æ€</div>
            <div class="summary-value" id="summaryStatus" style="font-size: 24px;">â³</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let allResults = {};

    // æ›´æ–°è¿›åº¦æ¡
    function updateProgress(percent) {
      const progressBar = document.getElementById('progressBar');
      const progressFill = document.getElementById('progressFill');
      progressBar.style.display = 'block';
      progressFill.style.width = percent + '%';
      if (percent >= 100) {
        setTimeout(() => {
          progressBar.style.display = 'none';
        }, 1000);
      }
    }

    // æ›´æ–°çŠ¶æ€æ ‡ç­¾
    function updateStatus(stepNum, status) {
      const statusEl = document.getElementById('status' + stepNum);
      statusEl.className = 'status-badge status-' + status;
      const statusText = {
        'pending': 'å¾…æ‰§è¡Œ',
        'running': 'æ‰§è¡Œä¸­...',
        'success': 'âœ“ å®Œæˆ',
        'error': 'âœ— å¤±è´¥'
      };
      statusEl.textContent = statusText[status] || status;
    }

    // æ·»åŠ æ—¥å¿—
    function addLog(resultId, message, type = 'info') {
      const resultBox = document.getElementById(resultId);
      resultBox.style.display = 'block';
      const logEntry = document.createElement('div');
      logEntry.className = 'log-entry log-' + type;
      logEntry.textContent = message;
      resultBox.appendChild(logEntry);
      resultBox.scrollTop = resultBox.scrollHeight;
    }

    // æ­¥éª¤1: æ£€æµ‹REST APIç«¯ç‚¹
    async function checkRestApiEndpoints() {
      updateStatus(1, 'running');
      const resultBox = document.getElementById('result1');
      resultBox.innerHTML = '';
      resultBox.style.display = 'block';

      addLog('result1', 'æ­£åœ¨è·å– WordPress REST API ç´¢å¼•...', 'info');

      try {
        const response = await fetch('https://www.ucppt.com/wp-json/', {
          credentials: 'include'
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const data = await response.json();
        addLog('result1', 'âœ“ æˆåŠŸè·å– REST API ç´¢å¼•', 'success');

        // æŸ¥æ‰¾æ‰€æœ‰è·¯ç”±
        const routes = data.routes || {};
        const allEndpoints = Object.keys(routes);

        addLog('result1', `å‘ç° ${allEndpoints.length} ä¸ªREST APIç«¯ç‚¹`, 'info');

        // æŸ¥æ‰¾WPCOMç›¸å…³ç«¯ç‚¹
        const wpcomEndpoints = allEndpoints.filter(path =>
          path.includes('wpcom') ||
          path.includes('member') ||
          path.includes('login') ||
          path.includes('auth') ||
          path.includes('sign')
        );

        addLog('result1', `æ‰¾åˆ° ${wpcomEndpoints.length} ä¸ªWPCOMç›¸å…³ç«¯ç‚¹`, wpcomEndpoints.length > 0 ? 'success' : 'warning');

        if (wpcomEndpoints.length > 0) {
          wpcomEndpoints.forEach(path => {
            const route = routes[path];
            const methods = route.methods || [];

            const endpointDiv = document.createElement('div');
            endpointDiv.className = 'endpoint-item';
            endpointDiv.innerHTML = `
              <div class="endpoint-path">${path}</div>
              <div class="endpoint-methods">
                ${methods.map(m => `<span class="method-badge method-${m.toLowerCase()}">${m}</span>`).join('')}
              </div>
            `;
            resultBox.appendChild(endpointDiv);
          });
        } else {
          addLog('result1', 'âš ï¸ æœªæ‰¾åˆ°WPCOM Member Proç›¸å…³ç«¯ç‚¹', 'warning');
          addLog('result1', 'å¯èƒ½çš„åŸå› ï¼š1) WPCOMæ’ä»¶æœªå®‰è£… 2) è‡ªå®šä¹‰ç«¯ç‚¹æœªæ³¨å†Œ', 'warning');
        }

        // æ£€æŸ¥é—®é¢˜ç«¯ç‚¹
        const problemEndpoint = '/wp-json/mwp-sign-sign.php';
        if (allEndpoints.includes(problemEndpoint)) {
          addLog('result1', `âŒ å‘ç°é—®é¢˜ç«¯ç‚¹: ${problemEndpoint}`, 'error');
        } else {
          addLog('result1', `âš ï¸ é—®é¢˜ç«¯ç‚¹ ${problemEndpoint} ä¸åœ¨REST APIç´¢å¼•ä¸­`, 'warning');
          addLog('result1', 'è¿™å¯èƒ½æ˜¯å¯¼è‡´400é”™è¯¯çš„åŸå› ï¼', 'error');
        }

        // ä¿å­˜ç»“æœ
        allResults.step1 = {
          totalEndpoints: allEndpoints.length,
          wpcomEndpoints: wpcomEndpoints,
          problemEndpointExists: allEndpoints.includes(problemEndpoint)
        };

        // æ›´æ–°æ‘˜è¦
        document.getElementById('summaryEndpoints').textContent = allEndpoints.length;
        document.getElementById('summaryWpcom').textContent = wpcomEndpoints.length;

        updateStatus(1, 'success');
        return wpcomEndpoints;

      } catch (error) {
        addLog('result1', `âŒ é”™è¯¯: ${error.message}`, 'error');
        updateStatus(1, 'error');
        throw error;
      }
    }

    // æ­¥éª¤2: æµ‹è¯•WPCOMç™»å½•API
    async function testWpcomLoginApi() {
      updateStatus(2, 'running');
      const resultBox = document.getElementById('result2');
      resultBox.innerHTML = '';
      resultBox.style.display = 'block';

      addLog('result2', 'æµ‹è¯•WPCOMç™»å½•APIç«¯ç‚¹...', 'info');

      // æµ‹è¯•å¯èƒ½çš„APIç«¯ç‚¹
      const possibleEndpoints = [
        '/wp-json/mwp-sign-sign.php', // é—®é¢˜ç«¯ç‚¹
        '/wp-json/wpcom-member/v1/login',
        '/wp-json/member-pro/v1/login',
        '/wp-json/wpcom/v1/auth',
        '/wp-json/wpcom/v1/sign-in'
      ];

      for (const endpoint of possibleEndpoints) {
        addLog('result2', `æµ‹è¯•: ${endpoint}`, 'info');

        try {
          // å‘é€OPTIONSè¯·æ±‚æ£€æŸ¥CORS
          const optionsResponse = await fetch('https://www.ucppt.com' + endpoint, {
            method: 'OPTIONS',
            credentials: 'include'
          });

          addLog('result2', `  OPTIONS ${optionsResponse.status}`, 'info');

          // å‘é€POSTæµ‹è¯•è¯·æ±‚
          const testResponse = await fetch('https://www.ucppt.com' + endpoint, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            credentials: 'include',
            body: JSON.stringify({
              username: 'test',
              password: 'test'
            })
          });

          const statusCode = testResponse.status;
          addLog('result2', `  POST ${statusCode} ${testResponse.statusText}`,
            statusCode === 200 ? 'success' : statusCode === 400 ? 'error' : 'warning');

          if (statusCode === 400 && endpoint === '/wp-json/mwp-sign-sign.php') {
            addLog('result2', `  âŒ ç¡®è®¤ï¼šè¿™å°±æ˜¯å¯¼è‡´ç™»å½•å¤±è´¥çš„ç«¯ç‚¹ï¼`, 'error');

            // å°è¯•è·å–å“åº”å†…å®¹
            try {
              const responseText = await testResponse.text();
              addLog('result2', `  å“åº”å†…å®¹: ${responseText.substring(0, 200)}`, 'error');
            } catch (e) {
              addLog('result2', `  æ— æ³•è¯»å–å“åº”å†…å®¹`, 'warning');
            }
          }

        } catch (error) {
          addLog('result2', `  âŒ é”™è¯¯: ${error.message}`, 'error');
        }
      }

      updateStatus(2, 'success');
    }

    // æ­¥éª¤3: æ£€æŸ¥Cookieå’Œè®¤è¯çŠ¶æ€
    async function checkCookiesAndAuth() {
      updateStatus(3, 'running');
      const resultBox = document.getElementById('result3');
      resultBox.innerHTML = '';
      resultBox.style.display = 'block';

      addLog('result3', 'æ£€æŸ¥æµè§ˆå™¨Cookie...', 'info');

      const cookies = document.cookie.split(';').map(c => c.trim());
      addLog('result3', `æ‰¾åˆ° ${cookies.length} ä¸ªCookie`, 'info');

      const wpCookies = cookies.filter(c =>
        c.includes('wordpress') ||
        c.includes('wpcom') ||
        c.includes('member') ||
        c.includes('logged_in')
      );

      addLog('result3', `WordPressç›¸å…³Cookie: ${wpCookies.length} ä¸ª`, wpCookies.length > 0 ? 'success' : 'warning');

      if (wpCookies.length > 0) {
        wpCookies.forEach(cookie => {
          const [name, value] = cookie.split('=');
          addLog('result3', `  ğŸª ${name}: ${value.substring(0, 30)}...`, 'info');
        });
      } else {
        addLog('result3', 'âš ï¸ æœªæ‰¾åˆ°WordPressç™»å½•Cookie', 'warning');
        addLog('result3', 'ç”¨æˆ·å¯èƒ½æœªç™»å½•WordPress', 'warning');
      }

      // æµ‹è¯• /check-login ç«¯ç‚¹
      addLog('result3', 'æµ‹è¯•è®¤è¯çŠ¶æ€...', 'info');
      try {
        const response = await fetch('https://www.ucppt.com/wp-json/nextjs-sso/v1/check-login', {
          credentials: 'include'
        });

        const data = await response.json();

        if (response.ok && data.logged_in) {
          addLog('result3', `âœ“ ç”¨æˆ·å·²ç™»å½•: ${data.user_login || 'æœªçŸ¥ç”¨æˆ·'}`, 'success');
        } else {
          addLog('result3', 'âœ— ç”¨æˆ·æœªç™»å½•', 'warning');
        }
      } catch (error) {
        addLog('result3', `æ£€æŸ¥è®¤è¯çŠ¶æ€å¤±è´¥: ${error.message}`, 'error');
      }

      // æ›´æ–°æ‘˜è¦
      document.getElementById('summaryCookies').textContent = cookies.length;

      updateStatus(3, 'success');
    }

    // æ­¥éª¤4: ç›‘æ§ç™»å½•é¡µé¢
    function monitorLoginPage() {
      updateStatus(4, 'running');
      const resultBox = document.getElementById('result4');
      resultBox.innerHTML = '';
      resultBox.style.display = 'block';

      addLog('result4', 'å‡†å¤‡æ‰“å¼€WPCOMç™»å½•é¡µé¢...', 'info');
      addLog('result4', 'è¯·æ‰‹åŠ¨æ“ä½œï¼š', 'warning');
      addLog('result4', '1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)', 'info');
      addLog('result4', '2. åˆ‡æ¢åˆ° Network æ ‡ç­¾', 'info');
      addLog('result4', '3. ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ‰“å¼€ç™»å½•é¡µé¢', 'info');
      addLog('result4', '4. è¾“å…¥è´¦å·å¯†ç å¹¶ç‚¹å‡»ç™»å½•', 'info');
      addLog('result4', '5. åœ¨ Network ä¸­æŸ¥æ‰¾å¤±è´¥çš„POSTè¯·æ±‚', 'info');
      addLog('result4', '6. ç‚¹å‡»è¯·æ±‚æŸ¥çœ‹è¯¦ç»†çš„Headersã€Payloadã€Response', 'info');

      const openButton = document.createElement('button');
      openButton.textContent = 'ğŸš€ æ‰“å¼€ç™»å½•é¡µé¢ï¼ˆåœ¨æ–°çª—å£ï¼‰';
      openButton.onclick = () => {
        window.open('https://www.ucppt.com/login', '_blank');
        addLog('result4', 'âœ“ å·²åœ¨æ–°çª—å£æ‰“å¼€ç™»å½•é¡µé¢', 'success');
      };
      resultBox.appendChild(openButton);

      updateStatus(4, 'success');
    }

    // å®Œæ•´è¯Šæ–­
    async function startFullDiagnosis() {
      const button = document.getElementById('startDiagnosis');
      button.disabled = true;
      button.textContent = 'ğŸ”„ è¯Šæ–­è¿›è¡Œä¸­...';

      try {
        updateProgress(0);

        // æ­¥éª¤1
        await checkRestApiEndpoints();
        updateProgress(33);
        await new Promise(r => setTimeout(r, 500));

        // æ­¥éª¤2
        await testWpcomLoginApi();
        updateProgress(66);
        await new Promise(r => setTimeout(r, 500));

        // æ­¥éª¤3
        await checkCookiesAndAuth();
        updateProgress(100);

        // æ›´æ–°æ‘˜è¦çŠ¶æ€
        document.getElementById('summaryStatus').textContent = 'âœ…';

        alert('âœ… è¯Šæ–­å®Œæˆï¼è¯·æŸ¥çœ‹å„æ­¥éª¤çš„è¯¦ç»†ç»“æœã€‚');

      } catch (error) {
        alert('âŒ è¯Šæ–­è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: ' + error.message);
        document.getElementById('summaryStatus').textContent = 'âŒ';
      } finally {
        button.disabled = false;
        button.textContent = 'ğŸš€ å¼€å§‹å®Œæ•´è¯Šæ–­ï¼ˆå…¨è‡ªåŠ¨ï¼‰';
      }
    }

    // å¤åˆ¶æ‰€æœ‰ç»“æœ
    function copyAllResults() {
      let text = '=== WPCOMç™»å½•è¯Šæ–­æŠ¥å‘Š ===\n\n';

      for (let i = 1; i <= 4; i++) {
        const resultBox = document.getElementById('result' + i);
        if (resultBox && resultBox.style.display !== 'none') {
          text += `--- æ­¥éª¤${i} ---\n`;
          text += resultBox.innerText + '\n\n';
        }
      }

      navigator.clipboard.writeText(text).then(() => {
        alert('âœ“ è¯Šæ–­ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
      });
    }
  </script>
</body>
</html>
